
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2024 by the D Language Foundation
    All Rights Reserved.
    https://dlang.org/foundation_overview.html
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>Files - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='Files' class='doc'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href="."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li><a href='../calendar.html'>Calendar</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.libera.chat/d'>IRC</a></li>
    <li><a href='https://discord.gg/bMZk9Q4'>Community Discord</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='https://github.com/dlang'>GitHub</a></li>
    <li><a href='../bugstats.html'>Issues</a></li>
    <li><a href='https://wiki.dlang.org/Get_involved'>Get involved</a></li>
    <li class="menu-divider"><a href='../foundation/contributors.html'>Contributors</a></li>
    <li><a href='../foundation/index.html'>Foundation</a></li>
    <li><a href='..//security.html'>Security Team</a></li>
    <li><a href='../foundation/donate.html'>Donate</a></li>
    <li><a href='../foundation/sponsors.html'>Sponsors</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://tour.dlang.org'>Tour</a></li>
    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='https://run.dlang.io'>run.dlang.io</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option  value="dlang.org/spec">Language</option>
                    <option  value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/&amp;component=dlang.org&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5BFiles%5D&amp;version=D2&amp;bug_severity=enhancement">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/dlang.org/edit/master/d.en/files.d">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1>Files</h1>
        
        



<p>We have seen in the previous chapter that the standard input and output streams can be redirected to and from files and other programs with the <code class="d_inline">&gt;</code>, <code class="d_inline">&lt;</code>, and <code class="d_inline">|</code> operators on the terminal. Despite being very powerful, these tools are not suitable in every situation because in many cases programs can not complete their tasks simply by reading from their input and writing to their output.
</p>

<p>For example, a program that deals with student records may use its standard output to display the program menu. Such a program would need to write the student records to an actual file instead of to <code class="d_inline">stdout</code>.
</p>

<p>In this chapter, we will cover reading from and writing to files of file systems.
</p>

<h5 class="subsection">Fundamental concepts</h5>

<p>Files are represented by the <code class="d_inline">File</code> <i>struct</i> of the <code class="d_inline">std.stdio</code> module. Since I haven't introduced structs yet, we will have to accept the syntax of struct construction as is for now.
</p>

<p>Before getting to code samples we have to go through fundamental concepts about files.
</p>

<h6>The producer and the consumer</h6>

<p>Files that are created on one platform may not be readily usable on other platforms. Merely opening a file and writing data to it may not be sufficient for that data to be available on the consumer's side. The producer and the consumer of the data must have already agreed on the format of the data that is in the file. For example, if the producer has written the id and the name of the student records in a certain order, the consumer must read the data back in the same order.
</p>

<p>Additionally, the code samples below do not write a <i>byte order mark</i> (BOM) to the beginning of the file. This may make your files incompatible with systems that require a BOM. (The BOM specifies in what order the UTF code units of characters are arranged in a file.)
</p>

<h6>Access rights</h6>

<p>File systems present files to programs under certain access rights. Access rights are important for both data integrity and performance.
</p>

<p>When it comes to reading, allowing multiple programs to read from the same file can improve performance, because the programs will not have to wait for each other to perform the read operation. On the other hand, when it comes to writing, it is often beneficial to prevent concurrent accesses to a file, even when only a single program wants to write to it. By locking the file, the operating system can prevent other programs from reading partially written files, from overwriting each other's data and so on.
</p>

<h6>Opening a file</h6>

<p>The standard input and output streams <code class="d_inline">stdin</code> and <code class="d_inline">stdout</code> are already <i>open</i> when programs start running. They are ready to be used.
</p>

<p>On the other hand, normal files must first be opened by specifying the name of the file and the access rights that are needed. As we will see in the examples below, creating a <code class="d_inline">File</code> object is sufficient to open the file specified by its name:
</p>

<pre class="d_code">    File file = File(<span class="d_string">"student_records"</span>, <span class="d_string">"r"</span>);
</pre>

<h6>Closing a file</h6>

<p>Any file that has been opened by a program must be closed when the program finishes using that file. In most cases the files need not be closed explicitly; they are closed automatically when <code class="d_inline">File</code> objects are terminated automatically:
</p>

<pre class="d_code"><span class="d_keyword">if</span> (aCondition) {

    <span class="d_comment">// Assume a File object has been created and used here.
</span>    <span class="d_comment">// ...
</span>
} <span class="d_comment">// ← The actual file would be closed automatically here
</span>  <span class="d_comment">//   when leaving this scope. No need to close explicitly.
</span></pre>

<p>In some cases a file object may need to be re-opened to access a different file or the same file with different access rights. In such cases the file must be closed and re-opened:
</p>

<pre class="d_code">    file.close();
    file.open(<span class="d_string">"student_records"</span>, <span class="d_string">"r"</span>);
</pre>

<h6>Writing to and reading from files</h6>

<p>Since files are character streams, input and output functions <code class="d_inline">writeln</code>, <code class="d_inline">readf</code>, etc. are used exactly the same way with them. The only difference is that the name of the <code class="d_inline">File</code> variable and a dot must be typed:
</p>

<pre class="d_code">    writeln(<span class="d_string">"hello"</span>);        <span class="d_comment">// writes to the standard output
</span>    stdout.writeln(<span class="d_string">"hello"</span>); <span class="d_comment">// same as above
</span>    <span class="hilite">file.</span>writeln(<span class="d_string">"hello"</span>);   <span class="d_comment">// writes to the specified file
</span></pre>

<h6><a id="ix_Files.eof" content="eof"></a> <code class="d_inline">eof()</code> to determine the end of a file</h6>

<p>The <code class="d_inline">eof()</code> member function determines whether the end of a file has been reached while reading from a file. It returns <code class="d_inline">true</code> if the end of the file has been reached.
</p>

<p>For example, the following loop will be active until the end of the file:
</p>

<pre class="d_code">    <span class="d_keyword">while</span> (!file.eof()) {
        <span class="d_comment">// ...
</span>    }
</pre>

<h6><a id="ix_Files.std.file" content="std.file"></a> The <code class="d_inline">std.file</code> module</h6>

<p>The <a href="http://dlang.org/phobos/std_file.html"><code class="d_inline">std.file</code> module</a> contains functions and types that are useful when working with contents of directories. For example, <code class="d_inline">exists</code> can be used to determine whether a file or a directory exists on the file systems:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.file;

<span class="d_comment">// ...
</span>
    <span class="d_keyword">if</span> (exists(fileName)) {
        <span class="d_comment">// there is a file or directory under that name
</span>
    } <span class="d_keyword">else</span> {
        <span class="d_comment">// no file or directory under that name
</span>    }
</pre>

<h5 class="subsection"><a id="ix_Files.File" content="File"></a> <code class="d_inline">std.stdio.File</code> struct</h5>

<p><a id="ix_Files.mode, file" content="mode, file"></a> The <code class="d_inline">File</code> struct is included in the <a href="http://dlang.org/phobos/std_stdio.html"><code class="d_inline">std.stdio</code> module</a>. To use it you specify the name of the file you want to open and the desired access rights, or mode. It uses the same mode characters that are used by <code class="d_inline">fopen</code> of the C programming language:
</p>

<table class="wide" border="1" cellpadding="4" cellspacing="0">
<tr align="center"><th scope="col">&nbsp;Mode&nbsp;</th> <th scope="col">Definition</th></tr>

<tr><td align="center">r</td><td><b>read</b> access<br/>the file is opened to be read from the beginning</td></tr>

<tr><td align="center">r+</td><td><b>read and write</b> access<br/>the file is opened to be read from and written at the beginning</td></tr>

<tr><td align="center">w</td><td><b>write</b> access<br/>if the file does not exist, it is created as empty<br/>if the file already exists, its contents are cleared</td></tr>

<tr><td align="center">w+</td><td><b>read and write</b> access<br/>if the file does not exist, it is created as empty<br/>if the file already exists, its contents are cleared</td></tr>

<tr><td align="center">a</td><td><b>append</b> access<br/>if the file does not exist, it is created as empty<br/>if the file already exists, its contents are preserved and it is opened to be written at the end</td></tr>

<tr><td align="center">a+</td><td><b>read and append</b> access<br/>if the file does not exist, it is created as empty<br/>if the file already exists, its contents are preserved and the file is opened to be read from the beginning and written at the end</td></tr>
</table>

<p>A 'b' character may be added to the mode string, as in "rb". This may have an effect on platforms that support the <i>binary mode</i>, but it is ignored on all POSIX systems.
</p>

<h6>Writing to a file</h6>

<p>The file must have been opened in one of the write modes first:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">void</span> main() {
    File file = File(<span class="d_string">"student_records"</span>, <span class="hilite"><span class="d_string">"w"</span></span>);

    file.writeln(<span class="d_string">"Name  : "</span>, <span class="d_string">"Zafer"</span>);
    file.writeln(<span class="d_string">"Number: "</span>, 123);
    file.writeln(<span class="d_string">"Class : "</span>, <span class="d_string">"1A"</span>);
}
</pre>

<p>As you remember from the <a href="strings.html">Strings chapter</a>, the type of literals like <code class="d_inline"><span class="d_string">"student_records"</span></code> is <code class="d_inline">string</code>, consisting of immutable characters. For that reason, it is not possible to construct <code class="d_inline">File</code> objects by using mutable text to specify the file name (e.g. <code class="d_inline">char[]</code>). When needed, call the <code class="d_inline">.idup</code> property of the mutable string to get an immutable copy.
</p>

<p>The program above creates or overwrites the contents of a file named <code class="d_inline">student_records</code> in the directory that it has been started under (in the program's <i>working directory</i>).
</p>

<p><i><b>Note:</b> File names can contain any character that is legal for that file system. To be portable, I will use only the commonly supported ASCII characters.</i>
</p>

<h6>Reading from a file</h6>

<p>To read from a file the file must first have been opened in one of the read modes:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;
<span class="d_keyword">import</span> std.string;

<span class="d_keyword">void</span> main() {
    File file = File(<span class="d_string">"student_records"</span>, <span class="hilite"><span class="d_string">"r"</span></span>);

    <span class="d_keyword">while</span> (!file.eof()) {
        string line = strip(file.readln());
        writeln(<span class="d_string">"read line -&gt; |"</span>, line);
    }
}
</pre>

<p>The program above reads all of the lines of the file named <code class="d_inline">student_records</code> and prints those lines to its standard output.
</p>

<h5 class="subsection">Problem</h5>
    
<p>Write a program that takes a file name from the user, opens that file, and writes all of the non-empty lines of that file to another file. The name of the new file can be based on the name of the original file. For example, if the original file is <code class="d_inline">foo.txt</code>, the new file can be <code class="d_inline">foo.txt.out</code>.
</p>

 <div class="cozum_link_tek"><p><a target="ddili_cozum" href="files.cozum.html"><i>... çözüm</i></a></p></div>


        <div class="smallprint" id="copyright">Copyright &copy; 1999-2024 by the <a href="../foundation_overview.html">D Language Foundation</a> | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on Mon Jan 29 20:50:23 2024
</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
