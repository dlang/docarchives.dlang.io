
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2024 by the D Language Foundation
    All Rights Reserved.
    https://dlang.org/foundation_overview.html
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>Statements - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='Statements' class='doc'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href=".."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.libera.chat/d'>IRC</a></li>
    <li><a href='https://discord.gg/bMZk9Q4'>Community Discord</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='../bugstats.html'>Issues</a></li>
    <li><a href='../contributing.html'>Contributing</a></li>
    <li class="menu-divider"><a href='../foundation/contributors.html'>Contributors</a></li>
    <li><a href='../foundation/index.html'>Foundation</a></li>
    <li><a href='..//security.html'>Security Team</a></li>
    <li><a href='../foundation/donate.html'>Donate</a></li>
    <li><a href='../foundation/sponsors.html'>Sponsors</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://tour.dlang.org'>Tour</a></li>
    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='https://run.dlang.io'>run.dlang.io</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../spec/glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Google Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option selected value="dlang.org/spec">Language</option>
                    <option  value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
<div class="subnav-helper"></div> <div class="subnav">    <div class="head"><h2>Language Reference</h2> <p class="subnav-duplicate"><a href="../spec/spec.html">table of contents</a></p></div>
    <ul>        <li><a href='            ../spec/intro.html'>Introduction</a></li><li><a href='            ../spec/lex.html'>Lexical</a></li><li><a href='            ../spec/istring.html'>Interpolation Expression Sequence</a></li><li><a href='            ../spec/grammar.html'>Grammar</a></li><li><a href='            ../spec/module.html'>Modules</a></li><li><a href='            ../spec/declaration.html'>Declarations</a></li><li><a href='            ../spec/type.html'>Types</a></li><li><a href='            ../spec/property.html'>Properties</a></li><li><a href='            ../spec/attribute.html'>Attributes</a></li><li><a href='            ../spec/pragma.html'>Pragmas</a></li><li><a href='            ../spec/expression.html'>Expressions</a></li><li><a href='            ../spec/statement.html'>Statements</a></li><li><a href='            ../spec/arrays.html'>Arrays</a></li><li><a href='            ../spec/hash-map.html'>Associative Arrays</a></li><li><a href='            ../spec/struct.html'>Structs and Unions</a></li><li><a href='            ../spec/class.html'>Classes</a></li><li><a href='            ../spec/interface.html'>Interfaces</a></li><li><a href='            ../spec/enum.html'>Enums</a></li><li><a href='            ../spec/const3.html'>Type Qualifiers</a></li><li><a href='            ../spec/function.html'>Functions</a></li><li><a href='            ../spec/operatoroverloading.html'>Operator Overloading</a></li><li><a href='            ../spec/template.html'>Templates</a></li><li><a href='            ../spec/template-mixin.html'>Template Mixins</a></li><li><a href='            ../spec/contracts.html'>Contract Programming</a></li><li><a href='            ../spec/version.html'>Conditional Compilation</a></li><li><a href='            ../spec/traits.html'>Traits</a></li><li><a href='            ../spec/errors.html'>Error Handling</a></li><li><a href='            ../spec/unittest.html'>Unit Tests</a></li><li><a href='            ../spec/garbage.html'>Garbage Collection</a></li><li><a href='            ../spec/float.html'>Floating Point</a></li><li><a href='            ../spec/iasm.html'>D x86 Inline Assembler</a></li><li><a href='            ../spec/ddoc.html'>Embedded Documentation</a></li><li><a href='            ../spec/interfaceToC.html'>Interfacing to C</a></li><li><a href='            ../spec/cpp_interface.html'>Interfacing to C++</a></li><li><a href='            ../spec/objc_interface.html'>Interfacing to Objective-C</a></li><li><a href='            ../spec/portability.html'>Portability Guide</a></li><li><a href='            ../spec/entity.html'>Named Character Entities</a></li><li><a href='            ../spec/memory-safe-d.html'>Memory Safety</a></li><li><a href='            ../spec/abi.html'>Application Binary Interface</a></li><li><a href='            ../spec/simd.html'>Vector Extensions</a></li><li><a href='            ../spec/betterc.html'>Better C</a></li><li><a href='            ../spec/importc.html'>ImportC</a></li><li><a href='            ../spec/ob.html'>Live Functions</a></li><li><a href='            ../spec/windows.html'>Windows Programming</a></li><li><a href='            ../spec/glossary.html'>Glossary</a></li><li><a href='            ../spec/legacy.html'>Legacy Code
        </a></li>
    </ul>
</div>
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/&amp;component=dlang.org&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5BStatements%5D&amp;version=D2&amp;bug_severity=enhancement">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/dlang.org/edit/master/spec/statement.dd">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1>Statements</h1>
        
<style>    body { counter-reset: h1 12; counter-increment: h1 -1; }
    h1 { counter-reset: h2 h3 p; }
    h2 { counter-reset: h3 h4 p; }
    h3 { counter-reset: h4 p; }
    h4 { counter-reset: p; }
    h1::before {
        counter-increment: h1;
        content: counter(h1) ". ";
    }
    .hyphenate h2::before {
        counter-increment: h2;
        content: counter(h1) "." counter(h2) " ";
    }
    h3::before {
        counter-increment: h3;
        content: counter(h1) "." counter(h2) "." counter(h3) " ";
    }
    h4::before {
        counter-increment: h4;
        content: counter(h1) "." counter(h2) "." counter(h3) "." counter(h4) " ";
    }
    p::before, .spec-boxes::before {
        counter-increment: p;
        content: counter(p) ". ";
    }
    h1::before, h2::before, h3::before, h4::before, p::before, .spec-boxes::before
    {
        color: #999;
        font-size: 80%;
        margin-right: 0.25em;
    }
</style>
        <div class="blankline"></div>
<div class="blankline"></div>
<div class="blankline"></div>
<div class="page-contents quickindex">    <div class="page-contents-header">        <b>Contents</b>
    </div>
    <ol>    <li><a href="#scope-statement">Scope Statements</a></li>
    <li><a href="#scope-block-statement">Scope Block Statements</a></li>
    <li><a href="#labeled-statement">Labeled Statements</a></li>
    <li><a href="#block-statement">Block Statement</a></li>
    <li><a href="#expression-statement">Expression Statement</a></li>
    <li><a href="#declaration-statement">Declaration Statement</a></li>
    <li><a href="#if-statement">If Statement</a></li>
    <li><a href="#while-statement">While Statement</a></li>
    <li><a href="#do-statement">Do Statement</a></li>
    <li><a href="#for-statement">For Statement</a></li>
    <li><a href="#foreach-statement">Foreach Statement</a><ol>        <li><a href="#foreach_over_arrays">Foreach over Arrays</a></li>
        <li><a href="#foreach_over_arrays_of_characters">Foreach over Arrays of Characters</a></li>
        <li><a href="#foreach_over_associative_arrays">Foreach over Associative Arrays</a></li>
        <li><a href="#foreach_over_struct_and_classes">Foreach over Structs and Classes with <span class="d_inlinecode donthyphenate notranslate">opApply</span></a></li>
        <li><a href="#foreach-with-ranges">Foreach over Structs and Classes with Ranges</a></li>
        <li><a href="#foreach_over_delegates">Foreach over Delegates</a></li>
        <li><a href="#foreach_over_tuples">Foreach over Sequences</a></li>
        <li><a href="#foreach_ref_parameters">Foreach Ref Parameters</a></li>
        <li><a href="#foreach_restrictions">Foreach Restrictions</a></li>
        <li><a href="#foreach-range-statement">Foreach Range Statement</a></li>
    </ol></li>
    <li><a href="#switch-statement">Switch Statement</a><ol>        <li><a href="#case-range">Case Range Statement</a></li>
        <li><a href="#no-implicit-fallthrough">No Implicit Fall-Through</a></li>
        <li><a href="#string-switch">String Switch</a></li>
    </ol></li>
    <li><a href="#final-switch-statement">Final Switch Statement</a></li>
    <li><a href="#continue-statement">Continue Statement</a></li>
    <li><a href="#break-statement">Break Statement</a></li>
    <li><a href="#return-statement">Return Statement</a></li>
    <li><a href="#goto-statement">Goto Statement</a></li>
    <li><a href="#with-statement">With Statement</a></li>
    <li><a href="#synchronized-statement">Synchronized Statement</a></li>
    <li><a href="#try-statement">Try Statement</a></li>
    <li><a href="#scope-guard-statement">Scope Guard Statement</a><ol>        <li><a href="#catching_cpp_class_objects">Catching C++ Class Objects</a></li>
    </ol></li>
    <li><a href="#asm">Asm Statement</a></li>
    <li><a href="#pragma-statement">Pragma Statement</a></li>
    <li><a href="#mixin-statement">Mixin Statement</a></li>
</ol>
</div>
<div class="blankline"></div>
    <p>The order of execution within a function is controlled by <a href="#Statement"><i>Statement</i></a>s.
    A function's body consists of a sequence of zero or more <i>Statement</i>s.
    Execution occurs in lexical order, though certain statements may have deferred effects.
    A <i>Statement</i> has no value; it is executed for its effects.
    </p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="Statement"><span class="gname">Statement</span></a>:
    <a href="#EmptyStatement"><i>EmptyStatement</i></a>
    <a href="#NonEmptyStatement"><i>NonEmptyStatement</i></a>
    <a href="#ScopeBlockStatement"><i>ScopeBlockStatement</i></a>
<div class="blankline"></div>
<a id="EmptyStatement"><span class="gname">EmptyStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">;</span>
<div class="blankline"></div>
<a id="NoScopeNonEmptyStatement"><span class="gname">NoScopeNonEmptyStatement</span></a>:
    <a href="#NonEmptyStatement"><i>NonEmptyStatement</i></a>
    <a href="#BlockStatement"><i>BlockStatement</i></a>
<div class="blankline"></div>
<a id="NoScopeStatement"><span class="gname">NoScopeStatement</span></a>:
    <a href="#EmptyStatement"><i>EmptyStatement</i></a>
    <a href="#NonEmptyStatement"><i>NonEmptyStatement</i></a>
    <a href="#BlockStatement"><i>BlockStatement</i></a>
<div class="blankline"></div>
<a id="NonEmptyOrScopeBlockStatement"><span class="gname">NonEmptyOrScopeBlockStatement</span></a>:
    <a href="#NonEmptyStatement"><i>NonEmptyStatement</i></a>
    <a href="#ScopeBlockStatement"><i>ScopeBlockStatement</i></a>
<div class="blankline"></div>
<a id="NonEmptyStatement"><span class="gname">NonEmptyStatement</span></a>:
    <a href="#NonEmptyStatementNoCaseNoDefault"><i>NonEmptyStatementNoCaseNoDefault</i></a>
    <a href="#CaseStatement"><i>CaseStatement</i></a>
    <a href="#CaseRangeStatement"><i>CaseRangeStatement</i></a>
    <a href="#DefaultStatement"><i>DefaultStatement</i></a>
<div class="blankline"></div>
<a id="NonEmptyStatementNoCaseNoDefault"><span class="gname">NonEmptyStatementNoCaseNoDefault</span></a>:
    <a href="#LabeledStatement"><i>LabeledStatement</i></a>
    <a href="#ExpressionStatement"><i>ExpressionStatement</i></a>
    <a href="#DeclarationStatement"><i>DeclarationStatement</i></a>
    <a href="#IfStatement"><i>IfStatement</i></a>
    <a href="#WhileStatement"><i>WhileStatement</i></a>
    <a href="#DoStatement"><i>DoStatement</i></a>
    <a href="#ForStatement"><i>ForStatement</i></a>
    <a href="#ForeachStatement"><i>ForeachStatement</i></a>
    <a href="#SwitchStatement"><i>SwitchStatement</i></a>
    <a href="#FinalSwitchStatement"><i>FinalSwitchStatement</i></a>
    <a href="#ContinueStatement"><i>ContinueStatement</i></a>
    <a href="#BreakStatement"><i>BreakStatement</i></a>
    <a href="#ReturnStatement"><i>ReturnStatement</i></a>
    <a href="#GotoStatement"><i>GotoStatement</i></a>
    <a href="#WithStatement"><i>WithStatement</i></a>
    <a href="#SynchronizedStatement"><i>SynchronizedStatement</i></a>
    <a href="#TryStatement"><i>TryStatement</i></a>
    <a href="#ScopeGuardStatement"><i>ScopeGuardStatement</i></a>
    <a href="#AsmStatement"><i>AsmStatement</i></a>
    <a href="#MixinStatement"><i>MixinStatement</i></a>
    <a href="#ForeachRangeStatement"><i>ForeachRangeStatement</i></a>
    <a href="../spec/pragma.html#PragmaStatement"><i>PragmaStatement</i></a>
    <a href="../spec/version.html#ConditionalStatement"><i>ConditionalStatement</i></a>
    <a href="../spec/version.html#StaticForeachStatement"><i>StaticForeachStatement</i></a>
    <a href="../spec/module.html#ImportDeclaration"><i>ImportDeclaration</i></a>
</pre>
<div class="blankline"></div>
        <p>Any ambiguities in the grammar between <i>Statement</i>s and
        <a href="../spec/declaration.html#Declaration"><i>Declaration</i></a>s are
        resolved by the declarations taking precedence.
        Wrapping such a statement in parentheses will
        disambiguate it in favor of being a <i>Statement</i>.
        </p>
<div class="blankline"></div>
<h2><span id="ScopeStatement"><a class="anchor" title="Permalink to this section" id="scope-statement" href="#scope-statement">Scope Statements</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="ScopeStatement"><span class="gname">ScopeStatement</span></a>:
    <a href="#NonEmptyStatement"><i>NonEmptyStatement</i></a>
    <a href="#BlockStatement"><i>BlockStatement</i></a>
</pre>
<div class="blankline"></div>
        <p>A new scope for local symbols
        is introduced for the <i>NonEmptyStatement</i>
        or <a href="#BlockStatement"><i>BlockStatement</i></a>.
        </p>
<div class="blankline"></div>
        <p>Even though a new scope is introduced,
        local symbol declarations cannot shadow (hide) other
        local symbol declarations in the same function.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">void</span> func1(<span class="d_keyword">int</span> x)
{
    <span class="d_keyword">int</span> x;    <span class="d_comment">// illegal, x shadows parameter x
</span>
    <span class="d_keyword">int</span> y;

    { <span class="d_keyword">int</span> y; } <span class="d_comment">// illegal, y shadows enclosing scope's y
</span>
    <span class="d_keyword">void</span> <span class="d_keyword">delegate</span>() dg;
    dg = { <span class="d_keyword">int</span> y; }; <span class="d_comment">// ok, this y is not in the same function
</span>
    <span class="d_keyword">struct</span> S
    {
        <span class="d_keyword">int</span> y;    <span class="d_comment">// ok, this y is a member, not a local
</span>    }

    { <span class="d_keyword">int</span> z; }
    { <span class="d_keyword">int</span> z; }  <span class="d_comment">// ok, this z is not shadowing the other z
</span>
    { <span class="d_keyword">int</span> t; }
    { t++;   }  <span class="d_comment">// illegal, t is undefined
</span>}
</pre>
<div class="blankline"></div>
    <div class="spec-boxes best-practice"><b>Best Practices:</b> Local declarations within a function should
    all have unique names, even if they are in non-overlapping scopes.
    </div>


<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="ScopeBlockStatement"><a class="anchor" title="Permalink to this section" id="scope-block-statement" href="#scope-block-statement">Scope Block Statements</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="ScopeBlockStatement"><span class="gname">ScopeBlockStatement</span></a>:
    <a href="#BlockStatement"><i>BlockStatement</i></a>
</pre>
<div class="blankline"></div>
        <p>A scope block statement introduces a new scope for the
        <a href="#BlockStatement"><i>BlockStatement</i></a>.
        </p>
<div class="blankline"></div>
<h2><span id="LabeledStatement"><a class="anchor" title="Permalink to this section" id="labeled-statement" href="#labeled-statement">Labeled Statements</a></span></h2>
<div class="blankline"></div>
<p>    Statements can be labeled. A label is an identifier that
        precedes a statement.
</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="LabeledStatement"><span class="gname">LabeledStatement</span></a>:
    <a href="../spec/lex.html#Identifier"><i>Identifier</i></a> <span class="d_inlinecode donthyphenate notranslate">:</span>
    <a href="../spec/lex.html#Identifier"><i>Identifier</i></a> <span class="d_inlinecode donthyphenate notranslate">:</span> <a href="#Statement"><i>Statement</i></a>
</pre>
<div class="blankline"></div>
<p>        Any statement can be labeled, including empty statements,
        and so can serve as the target of a <a href="#goto-statement">goto statement</a>.
        Labeled statements can also serve as the
        target of a <a href="#break-statement">break</a> or
        <a href="#continue-statement">continue</a> statement.
</p>
<p>        A label can appear without a following statement at the end of
        a block.
</p>
<p>        Labels are in a name space independent of declarations, variables,
        types, etc.
        Even so, labels cannot have the same name as local declarations.
        The label name space is the body of the function
        they appear in. Label name spaces do not nest, i.e. a label
        inside a block statement is accessible from outside that block.
</p>
<div class="blankline"></div>
    <p>Labels in one function cannot be referenced from another function.</p>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="BlockStatement"><a class="anchor" title="Permalink to this section" id="block-statement" href="#block-statement">Block Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="BlockStatement"><span class="gname">BlockStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">{ }</span>
    <span class="d_inlinecode donthyphenate notranslate">{</span> <a href="#StatementList"><i>StatementList</i></a> <span class="d_inlinecode donthyphenate notranslate">}</span>
<div class="blankline"></div>
<a id="StatementList"><span class="gname">StatementList</span></a>:
    <a href="#Statement"><i>Statement</i></a>
    <a href="#Statement"><i>Statement</i></a> <i>StatementList</i>
</pre>
<div class="blankline"></div>
    <p>A block statement is a sequence of statements enclosed by <span class="d_inlinecode donthyphenate notranslate">{ }</span>.
    The statements are executed in lexical order,
    until the end of the block is reached or
    a statement transfers control elsewhere.
    </p>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="ExpressionStatement"><a class="anchor" title="Permalink to this section" id="expression-statement" href="#expression-statement">Expression Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="ExpressionStatement"><span class="gname">ExpressionStatement</span></a>:
    <a href="../spec/expression.html#Expression"><i>Expression</i></a> <span class="d_inlinecode donthyphenate notranslate">;</span>
</pre>
<div class="blankline"></div>
        <p>The expression is evaluated.</p>
<div class="blankline"></div>
        <p>Expressions that have no effect, like <span class="d_inlinecode donthyphenate notranslate">(x + x)</span>,
        are illegal as expression statements unless they are cast
        to <span class="d_keyword">void</span>.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span> x;
x++;               <span class="d_comment">// ok
</span>x;                 <span class="d_comment">// illegal
</span>1+1;               <span class="d_comment">// illegal
</span><span class="d_keyword">cast</span>(<span class="d_keyword">void</span>)(x + x); <span class="d_comment">// ok
</span></pre>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="DeclarationStatement"><a class="anchor" title="Permalink to this section" id="declaration-statement" href="#declaration-statement">Declaration Statement</a></span></h2>
<div class="blankline"></div>
    <p>Declaration statements define variables,
    and declare types, templates, functions, imports,
    conditionals, static foreaches, and static asserts.
    </p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="DeclarationStatement"><span class="gname">DeclarationStatement</span></a>:
    <a href="../spec/declaration.html#StorageClasses"><i>StorageClasses</i></a><sub>opt</sub> <a href="../spec/declaration.html#Declaration"><i>Declaration</i></a>
</pre>
<div class="blankline"></div>
        <p>Some declaration statements:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span> a;        <span class="d_comment">// declare a as type int and initialize it to 0
</span><span class="d_keyword">struct</span> S { }  <span class="d_comment">// declare struct s
</span><span class="d_keyword">alias</span> myint = <span class="d_keyword">int</span>;
</pre>
<div class="blankline"></div>
<h2><span id="IfStatement"><a class="anchor" title="Permalink to this section" id="if-statement" href="#if-statement">If Statement</a></span></h2>
<div class="blankline"></div>
<p>If statements provide simple conditional execution of statements.</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="IfStatement"><span class="gname">IfStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">if (</span> <a href="#IfCondition"><i>IfCondition</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ThenStatement"><i>ThenStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">if (</span> <a href="#IfCondition"><i>IfCondition</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ThenStatement"><i>ThenStatement</i></a> <span class="d_inlinecode donthyphenate notranslate">else</span> <a href="#ElseStatement"><i>ElseStatement</i></a>
<div class="blankline"></div>
<a id="IfCondition"><span class="gname">IfCondition</span></a>:
    <a href="../spec/expression.html#Expression"><i>Expression</i></a>
    <span class="d_inlinecode donthyphenate notranslate">auto</span> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a> <span class="d_inlinecode donthyphenate notranslate">=</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a>
    <span class="d_inlinecode donthyphenate notranslate">scope</span> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a> <span class="d_inlinecode donthyphenate notranslate">=</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a>
    <a href="../spec/type.html#TypeCtors"><i>TypeCtors</i></a> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a> <span class="d_inlinecode donthyphenate notranslate">=</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a>
    <a href="../spec/type.html#TypeCtors"><i>TypeCtors</i></a><sub>opt</sub> <a href="../spec/type.html#BasicType"><i>BasicType</i></a> <a href="../spec/declaration.html#Declarator"><i>Declarator</i></a> <span class="d_inlinecode donthyphenate notranslate">=</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a>
<div class="blankline"></div>
<a id="ThenStatement"><span class="gname">ThenStatement</span></a>:
    <a href="#ScopeStatement"><i>ScopeStatement</i></a>
<div class="blankline"></div>
<a id="ElseStatement"><span class="gname">ElseStatement</span></a>:
    <a href="#ScopeStatement"><i>ScopeStatement</i></a>
</pre>
<div class="blankline"></div>
        <p>If there is a declared <em>Identifier</em> variable, it is evaluated.
        Otherwise, <em>Expression</em> is evaluated. The result is converted to a
        boolean, using <a href="../spec/operatoroverloading.html#cast"><span class="d_inlinecode donthyphenate notranslate">opCast!bool()</span></a>
        if the method is defined.
        If the boolean is <span class="d_inlinecode donthyphenate notranslate">true</span>, the <i>ThenStatement</i> is transferred
        to, otherwise the <i>ElseStatement</i> is transferred to.</p>
<div class="blankline"></div>
        <p>The <i>ElseStatement</i> is associated with the innermost <span class="d_inlinecode donthyphenate notranslate">if</span>
        statement which does not already have an associated <i>ElseStatement</i>.</p>
<div class="blankline"></div>
    <div class="panel">        When an <i>Identifier</i> form of <em>IfCondition</em> is used, a
        variable is declared with that name and initialized to the
        value of the <em>Expression</em>.

<ul><li>If <span class="d_inlinecode donthyphenate notranslate">auto</span> <i>Identifier</i> is provided, the type of the variable
          is the same as <em>Expression</em>.
</li>
<li>If <i>TypeCtors</i> <i>Identifier</i> is provided, the variable is
          declared to be the type of <em>Expression</em> but with <i>TypeCtors</i> applied.
</li>
<li>If the <i>BasicType</i> form is provided, it declares the type of the
          variable as it would for a normal
          <a href="../spec/declaration.html#variable-declarations">variable declaration</a>.
</li>
</ul>
        <p>The scope of the variable is the <em>ThenStatement</em> only.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">import</span> std.regex;

<span class="d_keyword">if</span> (<span class="d_keyword">auto</span> m = matchFirst(<span class="d_string">"abcdef"</span>, <span class="d_string">"b(c)d"</span>))
{
    writefln(<span class="d_string">"[%s]"</span>, m.pre);    <span class="d_comment">// prints [a]
</span>    writefln(<span class="d_string">"[%s]"</span>, m.post);   <span class="d_comment">// prints [ef]
</span>    writefln(<span class="d_string">"[%s]"</span>, m[0]);     <span class="d_comment">// prints [bcd]
</span>    writefln(<span class="d_string">"[%s]"</span>, m[1]);     <span class="d_comment">// prints [c]
</span>}
<span class="d_keyword">else</span>
{
    writeln(<span class="d_string">"no match"</span>);
    <span class="d_comment">//writeln(m.post); // Error: undefined identifier 'm'
</span>}
<span class="d_comment">//writeln(m.pre);      // Error: undefined identifier 'm'
</span></pre>

</div>
    </div>
<div class="blankline"></div>
<h2><span id="WhileStatement"><a class="anchor" title="Permalink to this section" id="while-statement" href="#while-statement">While Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="WhileStatement"><span class="gname">WhileStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">while (</span> <a href="#IfCondition"><i>IfCondition</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
</pre>
<div class="blankline"></div>
<p>A <i>While Statement</i> implements a simple loop.</p>
<div class="blankline"></div>
<p>If the <i>IfCondition</i> is an <em>Expression</em>, it is evaluated and must have a type
that can be converted to a boolean. If it's <span class="d_inlinecode donthyphenate notranslate">true</span> the <em>ScopeStatement</em> is executed.
After the <em>ScopeStatement</em> is executed, the <em>Expression</em> is evaluated again, and
if <span class="d_inlinecode donthyphenate notranslate">true</span> the <em>ScopeStatement</em> is executed again. This continues until the <em>Expression</em>
evaluates to <span class="d_inlinecode donthyphenate notranslate">false</span>.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span> i = 0;
<span class="d_keyword">while</span> (i &lt; 10)
{
    foo(i);
    ++i;
}
</pre>
<div class="blankline"></div>
<p>If an <span class="d_inlinecode donthyphenate notranslate">auto</span> <i>Identifier</i> is provided, it is declared and
initialized to the value and type of the <em>Expression</em>. Its scope
extends from when it is initialized to the end of the <em>ScopeStatement</em>.</p>
<div class="blankline"></div>
<p>If a <i>TypeCtors</i> <i>Identifier</i> is provided, it is declared
to be of the type specified by <i>TypeCtors</i> and is initialized with
the value of the <em>Expression</em>. Its scope extends from when it is
initialized to the end of the <em>ScopeStatement</em>.</p>
<div class="blankline"></div>
<p>If a <i>Declarator</i> is provided, it is declared and initialized
to the value of the <em>Expression</em>. Its scope extends from when it is
initialized to the end of the <em>ScopeStatement</em>.</p>
<div class="blankline"></div>
<p>A <a href="#BreakStatement"><i>BreakStatement</i></a> will exit the loop.</p>
<div class="blankline"></div>
<p>A <a href="#ContinueStatement"><i>ContinueStatement</i></a> will transfer directly to evaluating <i>IfCondition</i> again.</p>
<div class="blankline"></div>
<h2><span id="DoStatement"><a class="anchor" title="Permalink to this section" id="do-statement" href="#do-statement">Do Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="DoStatement"><span class="gname">DoStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">do</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a> <span class="d_inlinecode donthyphenate notranslate"> while (</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <span class="d_inlinecode donthyphenate notranslate">;</span>
</pre>
<div class="blankline"></div>
<div class="blankline"></div>
<p>Do while statements implement simple loops.</p>
<div class="blankline"></div>
<p><em>ScopeStatement</em> is executed. Then <em>Expression</em> is evaluated and must have a
type that can be converted to a boolean. If it's <span class="d_inlinecode donthyphenate notranslate">true</span> the loop is iterated
again. This continues until the <em>Expression</em> evaluates to <span class="d_inlinecode donthyphenate notranslate">false</span>.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span> i = 0;
<span class="d_keyword">do</span>
{
    foo(i);
} <span class="d_keyword">while</span> (++i &lt; 10);
</pre>
<div class="blankline"></div>
<p>A <a href="#BreakStatement"><i>BreakStatement</i></a> will exit the loop. A <a href="#ContinueStatement"><i>ContinueStatement</i></a>
will transfer directly to evaluating <em>Expression</em> again.</p>
<div class="blankline"></div>
<h2><span id="ForStatement"><a class="anchor" title="Permalink to this section" id="for-statement" href="#for-statement">For Statement</a></span></h2>
<div class="blankline"></div>
<p>For statements implement loops with initialization, test, and increment
clauses.</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="ForStatement"><span class="gname">ForStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">for (</span> <a href="#Initialize"><i>Initialize</i></a> <a href="#Test"><i>Test</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">;</span> <a href="#Increment"><i>Increment</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
<div class="blankline"></div>
<a id="Initialize"><span class="gname">Initialize</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">;</span>
    <a href="#NoScopeNonEmptyStatement"><i>NoScopeNonEmptyStatement</i></a>
<div class="blankline"></div>
<a id="Test"><span class="gname">Test</span></a>:
    <a href="../spec/expression.html#Expression"><i>Expression</i></a>
<div class="blankline"></div>
<a id="Increment"><span class="gname">Increment</span></a>:
    <a href="../spec/expression.html#Expression"><i>Expression</i></a>
</pre>
<div class="blankline"></div>
        <p><i>Initialize</i> is executed.
        <i>Test</i> is evaluated and must have a type that
        can be converted to a boolean. If <em>Test</em> is <span class="d_inlinecode donthyphenate notranslate">true</span> the
        <em>ScopeStatement</em> is executed. After execution,
        <i>Increment</i> is executed.
        Then <i>Test</i> is evaluated again, and if <span class="d_inlinecode donthyphenate notranslate">true</span> the
        <em>ScopeStatement</em> is executed again. This continues until the
        <i>Test</i> evaluates to <span class="d_inlinecode donthyphenate notranslate">false</span>.
        </p>
<div class="blankline"></div>
        <p>A <a href="#BreakStatement"><i>BreakStatement</i></a> will exit the loop.
        A <a href="#ContinueStatement"><i>ContinueStatement</i></a>
        will transfer directly to the <i>Increment</i>.
        </p>
<div class="blankline"></div>
        <p>A <i>ForStatement</i> creates a new scope.
        If <i>Initialize</i> declares a variable, that variable's scope
        extends through <em>ScopeStatement</em>. For example:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">for</span> (<span class="d_keyword">int</span> i = 0; i &lt; 10; i++)
    foo(i);
</pre>
<div class="blankline"></div>
        is equivalent to:
<div class="blankline"></div>
<pre class="d_code notranslate">{
    <span class="d_keyword">int</span> i;
    <span class="d_keyword">for</span> (i = 0; i &lt; 10; i++)
        foo(i);
}
</pre>
<div class="blankline"></div>
<p><em>ScopeStatement</em> cannot be an empty statement:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">for</span> (<span class="d_keyword">int</span> i = 0; i &lt; 10; i++)
    ;       <span class="d_comment">// illegal
</span></pre>
<div class="blankline"></div>
        Use instead:
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">for</span> (<span class="d_keyword">int</span> i = 0; i &lt; 10; i++)
{
}
</pre>
<div class="blankline"></div>
    <p><i>Initialize</i> may be just <span class="d_inlinecode donthyphenate notranslate">;</span>.
    <i>Test</i> may be omitted, and if
    so, it is treated as if it evaluated to <span class="d_inlinecode donthyphenate notranslate">true</span>.</p>
<div class="blankline"></div>
    <div class="spec-boxes best-practice"><b>Best Practices:</b> Consider replacing <i>ForStatements</i> with
    <a href="../spec/statement.html#foreach-statement">Foreach Statements</a> or
    <a href="../spec/statement.html#ForeachRangeStatement">Foreach Range Statements</a>.
    Foreach loops are easier to understand, less prone to error, and easier to refactor.
    </div>


<div class="blankline"></div>
<h2><span id="ForeachStatement"><a class="anchor" title="Permalink to this section" id="foreach-statement" href="#foreach-statement">Foreach Statement</a></span></h2>
<div class="blankline"></div>
<p>A <span class="d_inlinecode donthyphenate notranslate">foreach</span> statement iterates a series of values.</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="AggregateForeach"><span class="gname">AggregateForeach</span></a>:
    <a href="#Foreach"><i>Foreach</i></a> <span class="d_inlinecode donthyphenate notranslate">(</span> <a href="#ForeachTypeList"><i>ForeachTypeList</i></a> <span class="d_inlinecode donthyphenate notranslate">;</span> <a href="#ForeachAggregate"><i>ForeachAggregate</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span>
<div class="blankline"></div>
<a id="ForeachStatement"><span class="gname">ForeachStatement</span></a>:
    <a href="#AggregateForeach"><i>AggregateForeach</i></a> <a href="#NoScopeNonEmptyStatement"><i>NoScopeNonEmptyStatement</i></a>
<div class="blankline"></div>
<a id="Foreach"><span class="gname">Foreach</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">foreach</span>
    <span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span>
<div class="blankline"></div>
<a id="ForeachTypeList"><span class="gname">ForeachTypeList</span></a>:
    <a href="#ForeachType"><i>ForeachType</i></a>
    <a href="#ForeachType"><i>ForeachType</i></a> <span class="d_inlinecode donthyphenate notranslate">,</span> <i>ForeachTypeList</i>
<div class="blankline"></div>
<a id="ForeachType"><span class="gname">ForeachType</span></a>:
    <a href="#ForeachTypeAttributes"><i>ForeachTypeAttributes</i></a><sub>opt</sub> <a href="../spec/type.html#BasicType"><i>BasicType</i></a> <a href="../spec/declaration.html#Declarator"><i>Declarator</i></a>
    <a href="#ForeachTypeAttributes"><i>ForeachTypeAttributes</i></a><sub>opt</sub> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a>
    <a href="#ForeachTypeAttributes"><i>ForeachTypeAttributes</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">alias</span> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a>
<div class="blankline"></div>
<a id="ForeachTypeAttributes"><span class="gname">ForeachTypeAttributes</span></a>:
    <a href="#ForeachTypeAttribute"><i>ForeachTypeAttribute</i></a>
    <a href="#ForeachTypeAttribute"><i>ForeachTypeAttribute</i></a> <i>ForeachTypeAttributes</i>
<div class="blankline"></div>
<a id="ForeachTypeAttribute"><span class="gname">ForeachTypeAttribute</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">enum</span>
    <span class="d_inlinecode donthyphenate notranslate">ref</span>
    <span class="d_inlinecode donthyphenate notranslate">scope</span>
    <a href="../spec/type.html#TypeCtor"><i>TypeCtor</i></a>
<div class="blankline"></div>
<a id="ForeachAggregate"><span class="gname">ForeachAggregate</span></a>:
    <a href="../spec/expression.html#Expression"><i>Expression</i></a>
</pre>
<div class="blankline"></div>
<p>        <i>ForeachAggregate</i> is evaluated. It must evaluate to an expression
        which is a static array, dynamic array, associative array,
        struct, class, delegate, or sequence.
        The <em>NoScopeNonEmptyStatement</em> is executed, once for each element of the
        aggregate.
</p>
<p>        The number of variables declared in <i>ForeachTypeList</i>
        depends on the kind of aggregate. The declared variables are
        set at the start of each iteration.
</p>
<ul>        <li>By default a single declared variable is a copy of the current element.</li>
        <li>If the <i>ForeachTypeAttribute</i> is <span class="d_inlinecode donthyphenate notranslate">ref</span>, that variable will
        be a reference to the current element of the aggregate.</li>
        <li>If the <i>ForeachTypeAttribute</i> is <span class="d_inlinecode donthyphenate notranslate">scope</span>, the variable
        will have <a href="../spec/function.html#scope-parameters"><span class="d_inlinecode donthyphenate notranslate">scope</span></a> semantics.</li>
</ul>
<p>        If not specified, the type of a <i>ForeachType</i> variable
        can be inferred from the type of the <i>ForeachAggregate</i>.
        Note that <span class="d_inlinecode donthyphenate notranslate">auto</span> is not a valid <i>ForeachTypeAttribute</i>.
        The two <span class="d_inlinecode donthyphenate notranslate">foreach</span> statements below are equivalent:
</p>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">int</span>[] arr = [1, 2, 3];

<span class="d_keyword">foreach</span> (<span class="d_keyword">int</span> n; arr)
    writeln(n);

<span class="d_keyword">foreach</span> (n; arr) <span class="d_comment">// ok, n is an int
</span>    writeln(n);
</pre>

</div>
<p>        The aggregate must be <a href="#foreach_restrictions">loop invariant</a>,
        meaning that elements cannot be added or removed from it
        in the <em>NoScopeNonEmptyStatement</em>.
</p>
<div class="blankline"></div>
        <p>A <a href="#BreakStatement"><i>BreakStatement</i></a> in the body of the foreach will exit the
        loop. A <a href="#ContinueStatement"><i>ContinueStatement</i></a> will immediately start the
        next iteration.
        </p>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_over_arrays" href="#foreach_over_arrays">Foreach over Arrays</a></h3>
<div class="blankline"></div>
<p>        If the aggregate is a static or dynamic array, there
        can be one or two variables declared. If one, then the variable
        is said to be the <i>value</i>, which is set successively to each
        element of the array. The type of the variable, if specified,
        must be compatible with the array element type (except for the
        special handling of character elements outlined below).
        The <em>value</em> variable can modify array elements when
        <a href="#foreach_ref_parameters">declared with <span class="d_inlinecode donthyphenate notranslate">ref</span></a>.
</p>
<p>        If there are
        two variables declared, the first is said to be the <i>index</i>
        and the second is said to be the <i>value</i> as above.
        <i>index</i> cannot be declared with <span class="d_inlinecode donthyphenate notranslate">ref</span>.
        It is set to the index of the array element on each iteration.
        The index type can be inferred:
</p>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">char</span>[] a = ['h', 'i'];

<span class="d_keyword">foreach</span> (i, <span class="d_keyword">char</span> c; a)
{
    writefln(<span class="d_string">"a[%d] = '%c'"</span>, i, c);
}
</pre>

</div>
        <p>For a dynamic array, the <i>index</i> type must be compatible
        with <span class="d_inlinecode donthyphenate notranslate">size_t</span>, unless the array length is statically known to fit
        in a smaller integer type.
        Static arrays may use any integral type that spans the length
        of the array.</p>
<div class="blankline"></div>
        <p>For <span class="d_inlinecode donthyphenate notranslate">foreach</span>, the
        elements for the array are iterated over starting at index 0
        and continuing to the last element of the array.
        For <span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span>, the array elements are visited in the reverse
        order.
        </p>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_over_arrays_of_characters" href="#foreach_over_arrays_of_characters">Foreach over Arrays of Characters</a></h3>
<div class="blankline"></div>
        <p>If the aggregate expression is a static or dynamic array of
        <span class="d_inlinecode donthyphenate notranslate">char</span>s, <span class="d_inlinecode donthyphenate notranslate">wchar</span>s, or <span class="d_inlinecode donthyphenate notranslate">dchar</span>s, then the type of
        the <i>value</i> variable
        can be any of <span class="d_inlinecode donthyphenate notranslate">char</span>, <span class="d_inlinecode donthyphenate notranslate">wchar</span>, or <span class="d_inlinecode donthyphenate notranslate">dchar</span>.
        In this manner any UTF array
        can be decoded into any UTF type:
        </p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">char</span>[] a = <span class="d_string">"\xE2\x89\xA0"</span>.dup;  <span class="d_comment">// \u2260 encoded as 3 UTF-8 bytes
</span>
<span class="d_keyword">foreach</span> (<span class="d_keyword">dchar</span> c; a)
{
    writefln(<span class="d_string">"a[] = %x"</span>, c); <span class="d_comment">// prints 'a[] = 2260'
</span>}

<span class="d_keyword">dchar</span>[] b = <span class="d_string">"\u2260"d</span>.dup;

<span class="d_keyword">foreach</span> (<span class="d_keyword">char</span> c; b)
{
    writef(<span class="d_string">"%x, "</span>, c);  <span class="d_comment">// prints 'e2, 89, a0, '
</span>}
</pre>

</div>
<div class="blankline"></div>
        <p>Aggregates can be string literals, which can be accessed
        as <span class="d_inlinecode donthyphenate notranslate">char</span>, <span class="d_inlinecode donthyphenate notranslate">wchar</span>, or <span class="d_inlinecode donthyphenate notranslate">dchar</span> arrays:
        </p>
<div class="blankline"></div>
    <div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">foreach</span> (<span class="d_keyword">char</span> c; <span class="d_string">"ab"</span>)
{
    writefln(<span class="d_string">"'%s'"</span>, c);
}
<span class="d_keyword">foreach</span> (<span class="d_keyword">wchar</span> w; <span class="d_string">"xy"</span>)
{
    writefln(<span class="d_string">"'%s'"</span>, w);
}
</pre>
    
</div>
<div class="blankline"></div>
        <p>which would print:
        </p>
<div class="blankline"></div>
<pre class="console notranslate">'a'
'b'
'x'
'y'
</pre>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_over_associative_arrays" href="#foreach_over_associative_arrays">Foreach over Associative Arrays</a></h3>
<div class="blankline"></div>
        <p>If the aggregate expression is an associative array, there
        can be one or two variables declared. If one, then the variable
        is said to be the <i>value</i> set to the elements of the array,
        one by one. If the type of the
        variable is provided, it must implicitly convert from the array element type.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_comment">// value type is int
</span><span class="d_keyword">int</span>[string] userAges = [<span class="d_string">"john"</span>:30, <span class="d_string">"sue"</span>:32];

<span class="d_keyword">foreach</span> (<span class="d_keyword">ref</span> age; userAges)
{
    age++;
}
<span class="d_keyword">assert</span>(userAges == [<span class="d_string">"john"</span>:31, <span class="d_string">"sue"</span>:33]);
</pre>

</div>
<div class="blankline"></div>
        <p>If there are
        two variables declared, the first is said to be the <i>index</i>
        and the second is said to be the <i>value</i>. The <i>index</i>
        must be compatible with the indexing type of the associative
        array. It cannot be <span class="d_inlinecode donthyphenate notranslate">ref</span>,
        and it is set to be the index of the array element.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_comment">// index type is string, value type is double
</span><span class="d_keyword">double</span>[string] aa = [<span class="d_string">"pi"</span>:3.14, <span class="d_string">"e"</span>:2.72];

<span class="d_keyword">foreach</span> (string s, <span class="d_keyword">double</span> d; aa)
{
    writefln(<span class="d_string">"aa['%s'] = %g"</span>, s, d);
}
</pre>

</div>
<div class="blankline"></div>
        <p>The order in which the elements of the
        array are iterated over is unspecified for <span class="d_inlinecode donthyphenate notranslate">foreach</span>.
        This is why <span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span> for associative arrays is illegal.</p>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_over_struct_and_classes" href="#foreach_over_struct_and_classes">Foreach over Structs and Classes with <span class="d_inlinecode donthyphenate notranslate">opApply</span></a></h3>
<div class="blankline"></div>
    <p>If the aggregate expression is a struct or class object,
        the <span class="d_inlinecode donthyphenate notranslate">foreach</span> is defined by the
        special <span id="opApply"><a class="anchor" title="Permalink to this section" id="op-apply" href="#op-apply"><span class="d_inlinecode donthyphenate notranslate">opApply</span></a></span> member function, and the
        <span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span> behavior is defined by the special
        <span id="opApplyReverse"><a class="anchor" title="Permalink to this section" id="op-apply-reverse" href="#op-apply-reverse"><span class="d_inlinecode donthyphenate notranslate">opApplyReverse</span></a></span> member function.
        These functions must each have the signature below:
    </p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="OpApplyDeclaration"><span class="gname">OpApplyDeclaration</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">int opApply</span> <span class="d_inlinecode donthyphenate notranslate">(</span> <span class="d_inlinecode donthyphenate notranslate">scope</span> <span class="d_inlinecode donthyphenate notranslate">int delegate</span> <span class="d_inlinecode donthyphenate notranslate">(</span> <i>OpApplyParameters</i> <span class="d_inlinecode donthyphenate notranslate">)</span> <span class="d_inlinecode donthyphenate notranslate">dg</span> <span class="d_inlinecode donthyphenate notranslate">)</span> <span class="d_inlinecode donthyphenate notranslate">;</span>
<div class="blankline"></div>
<a id="OpApplyParameters"><span class="gname">OpApplyParameters</span></a>:
    <em>OpApplyParameter</em>
    <em>OpApplyParameter</em>, <em>OpApplyParameters</em>
<div class="blankline"></div>
<a id="OpApplyParameter"><span class="gname">OpApplyParameter</span></a>:
    <a href="#ForeachTypeAttributes"><i>ForeachTypeAttributes</i></a><sub>opt</sub> <a href="../spec/type.html#BasicType"><i>BasicType</i></a> <a href="../spec/declaration.html#Declarator"><i>Declarator</i></a>
</pre>
<div class="blankline"></div>
    <p>where each <i>OpApplyParameter</i> of <span class="d_inlinecode donthyphenate notranslate">dg</span> must match a <a href="#ForeachType"><i>ForeachType</i></a>
        in a <a href="#ForeachStatement"><i>ForeachStatement</i></a>,
        otherwise the <em>ForeachStatement</em> will cause an error.</p>
<div class="blankline"></div>
    <p>Any <em>ForeachTypeAttribute</em> cannot be <span class="d_inlinecode donthyphenate notranslate">enum</span>.</p>
<div class="blankline"></div>
    <div class="panel">    To support a <span class="d_inlinecode donthyphenate notranslate">ref</span> iteration variable, the delegate must take a <span class="d_inlinecode donthyphenate notranslate">ref</span> parameter:
<div class="blankline"></div>
    <div class="runnable-examples" data-compile=''>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">int</span> opApply(<span class="d_keyword">scope</span> <span class="d_keyword">int</span> <span class="d_keyword">delegate</span>(<span class="d_keyword">ref</span> <span class="d_keyword">uint</span> n) dg);
}
<span class="d_keyword">void</span> f(S s)
{
    <span class="d_keyword">foreach</span> (<span class="d_keyword">ref</span> <span class="d_keyword">uint</span> i; s)
        i++;
}
</pre>
    
</div>
    Above, <span class="d_inlinecode donthyphenate notranslate">opApply</span> is still matched when <span class="d_inlinecode donthyphenate notranslate">i</span> is not <span class="d_inlinecode donthyphenate notranslate">ref</span>, so by using
    a <span class="d_inlinecode donthyphenate notranslate">ref</span> delegate parameter both forms are supported.
    </div>
<div class="blankline"></div>
    <p>There can be multiple <span class="d_inlinecode donthyphenate notranslate">opApply</span> and <span class="d_inlinecode donthyphenate notranslate">opApplyReverse</span> functions -
        one is selected
        by matching each parameter of <span class="d_inlinecode donthyphenate notranslate">dg</span> to each <i>ForeachType</i>
        declared in the <i>ForeachStatement</i>.</p>
<div class="blankline"></div>
    <p>The body of the apply
        function iterates over the elements it aggregates, passing each one
        in successive calls to the <span class="d_inlinecode donthyphenate notranslate">dg</span> delegate. The delegate return value
        determines whether to interrupt iteration:</p>
<div class="blankline"></div>
    <ul>        <li>If the result is nonzero, apply must cease
        iterating and return that value.</li>
        <li>If the result is 0, then iteration should continue.
        If there are no more elements to iterate,
        apply must return 0.</li>
    </ul>
<div class="blankline"></div>
    <p>The result of calling the delegate will be nonzero if the <em>ForeachStatement</em>
        body executes a matching <a href="#BreakStatement"><i>BreakStatement</i></a>, <a href="#ReturnStatement"><i>ReturnStatement</i></a>, or
        <a href="#GotoStatement"><i>GotoStatement</i></a> whose matching label is outside the <em>ForeachStatement</em>.
    </p>
<div class="blankline"></div>
    <p>For example, consider a class that is a container for two elements:</p>
<div class="blankline"></div>
        <div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">class</span> Foo
{
    <span class="d_keyword">uint</span>[] array;

    <span class="d_keyword">int</span> opApply(<span class="d_keyword">scope</span> <span class="d_keyword">int</span> <span class="d_keyword">delegate</span>(<span class="d_keyword">ref</span> <span class="d_keyword">uint</span>) dg)
    {
        <span class="d_keyword">foreach</span> (e; array)
        {
            <span class="d_keyword">int</span> result = dg(e);
            <span class="d_keyword">if</span> (result)
                <span class="d_keyword">return</span> result;
        }
        <span class="d_keyword">return</span> 0;
    }
}

<span class="d_keyword">void</span> main()
{
    <span class="d_keyword">import</span> std.stdio;

    Foo a = <span class="d_keyword">new</span> Foo();
    a.array = [73, 82, 2, 9];

    <span class="d_keyword">foreach</span> (<span class="d_keyword">uint</span> u; a)
    {
        <span class="d_keyword">if</span> (u &lt; 5)
            <span class="d_keyword">break</span>;

        writeln(u);
    }
}
</pre>
        
</div>
<div class="blankline"></div>
    <p>This would print:</p>
<div class="blankline"></div>
<pre class="console notranslate">73
82
</pre>
    <div class="panel">    The <span class="d_inlinecode donthyphenate notranslate">scope</span> storage class on the <span class="d_inlinecode donthyphenate notranslate">dg</span> parameter means that the delegate does
    not escape the scope of the <span class="d_inlinecode donthyphenate notranslate">opApply</span> function (an example would be assigning <span class="d_inlinecode donthyphenate notranslate">dg</span> to a
    global variable). If it cannot be statically guaranteed that <span class="d_inlinecode donthyphenate notranslate">dg</span> does not escape, a closure may
    be allocated for it on the heap instead of the stack.
<div class="blankline"></div>
    <div class="spec-boxes best-practice"><b>Best Practices:</b> Annotate delegate parameters to <span class="d_inlinecode donthyphenate notranslate">opApply</span> functions with <span class="d_inlinecode donthyphenate notranslate">scope</span> when possible.</div>


    </div>
<div class="blankline"></div>
    <p><b>Important:</b> If <span class="d_inlinecode donthyphenate notranslate">opApply</span> catches any exceptions, ensure that those
        exceptions did not originate from the delegate passed to <span class="d_inlinecode donthyphenate notranslate">opApply</span>. The user would expect
        exceptions thrown from a <span class="d_inlinecode donthyphenate notranslate">foreach</span> body to both terminate the loop, and propagate outside
        the <span class="d_inlinecode donthyphenate notranslate">foreach</span> body.
     </p>
<div class="blankline"></div>
<h4><a class="anchor" title="Permalink to this section" id="template-op-apply" href="#template-op-apply">Template <span class="d_inlinecode donthyphenate notranslate">opApply</span></a></h4>
<div class="blankline"></div>
    <p><span class="d_inlinecode donthyphenate notranslate">opApply</span> can also be a templated function,
        which will infer the types of parameters based on the <i>ForeachStatement</i>.
        For example:</p>
<div class="blankline"></div>
        <div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">import</span> std.traits : ParameterTypeTuple;  <span class="d_comment">// introspection template
</span>    <span class="d_keyword">import</span> std.stdio;

    <span class="d_keyword">int</span> opApply(Dg)(<span class="d_keyword">scope</span> Dg dg)
    <span class="d_keyword">if</span> (ParameterTypeTuple!Dg.length == 2) <span class="d_comment">// foreach with 2 parameters
</span>    {
        writeln(2);
        <span class="d_keyword">return</span> 0;
    }

    <span class="d_keyword">int</span> opApply(Dg)(<span class="d_keyword">scope</span> Dg dg)
    <span class="d_keyword">if</span> (ParameterTypeTuple!Dg.length == 3) <span class="d_comment">// foreach with 3 parameters
</span>    {
        writeln(3);
        <span class="d_keyword">return</span> 0;
    }
}

<span class="d_keyword">void</span> main()
{
    <span class="d_keyword">foreach</span> (<span class="d_keyword">int</span> a, <span class="d_keyword">int</span> b; S()) { }  <span class="d_comment">// calls first opApply function
</span>    <span class="d_keyword">foreach</span> (<span class="d_keyword">int</span> a, <span class="d_keyword">int</span> b, <span class="d_keyword">float</span> c; S()) { }  <span class="d_comment">// calls second opApply function
</span>}
</pre>
        
</div>
<div class="blankline"></div>
<h3><span id="foreach_with_ranges"><a class="anchor" title="Permalink to this section" id="foreach-with-ranges" href="#foreach-with-ranges">Foreach over Structs and Classes with Ranges</a></span></h3>
<div class="blankline"></div>
    <p>If the aggregate expression is a struct or class object, but the
        <span class="d_inlinecode donthyphenate notranslate">opApply</span> for <span class="d_inlinecode donthyphenate notranslate">foreach</span>, or <span class="d_inlinecode donthyphenate notranslate">opApplyReverse</span> for <span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span> do not exist,
        then iteration can be done with <a href="../phobos/std_range.html">range</a> primitives.
        For <span class="d_inlinecode donthyphenate notranslate">foreach</span>, this means the following properties and methods must
        be defined:
    </p>
<div class="blankline"></div>
        <center><table><caption>Foreach Range Properties</caption>        <tr><th class="donthyphenate"><b>Property</b></th><th class="donthyphenate"><b>Purpose</b></th></tr>
        <tr><td><span class="d_inlinecode donthyphenate notranslate">.empty</span></td><td>returns true if no more elements</td></tr>
        <tr><td><span class="d_inlinecode donthyphenate notranslate">.front</span></td><td>return the leftmost element of the range</td></tr>
        </table></center>
<div class="blankline"></div>
        <center><table><caption>Foreach Range Methods</caption>        <tr><th class="donthyphenate"><b>Method</b></th><th class="donthyphenate"><b>Purpose</b></th></tr>
        <tr><td><span class="d_inlinecode donthyphenate notranslate">.popFront()</span></td><td>move the left edge of the range
        right by one</td></tr>
        </table></center>
<div class="blankline"></div>
    <p>Meaning:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">foreach</span> (e; range) { ... }
</pre>
<div class="blankline"></div>
    <p>translates to:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">for</span> (<span class="d_keyword">auto</span> __r = range; !__r.empty; __r.popFront())
{
    <span class="d_keyword">auto</span> e = __r.front;
    ...
}
</pre><div class="blankline"></div>
<div class="blankline"></div>
    <p>Similarly, for <span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span>, the following properties and
        methods must be defined:
    </p>
<div class="blankline"></div>
        <center><table><caption>Foreach_reverse Range Properties</caption>        <tr><th class="donthyphenate"><b>Property</b></th><th class="donthyphenate"><b>Purpose</b></th></tr>
        <tr><td><span class="d_inlinecode donthyphenate notranslate">.empty</span></td><td>returns true if no more elements</td></tr>
        <tr><td><span class="d_inlinecode donthyphenate notranslate">.back</span></td><td>return the rightmost element of the range</td></tr>
        </table></center>
<div class="blankline"></div>
        <center><table><caption>Foreach_reverse Range Methods</caption>        <tr><th class="donthyphenate"><b>Method</b></th><th class="donthyphenate"><b>Purpose</b></th></tr>
        <tr><td><span class="d_inlinecode donthyphenate notranslate">.popBack()</span></td><td>move the right edge of the range
        left by one</td></tr>
        </table></center>
<div class="blankline"></div>
    <p>Meaning:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">foreach_reverse</span> (e; range) { ... }
</pre>
<div class="blankline"></div>
    <p>translates to:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">for</span> (<span class="d_keyword">auto</span> __r = range; !__r.empty; __r.popBack())
{
    <span class="d_keyword">auto</span> e = __r.back;
    ...
}
</pre><div class="blankline"></div>
<div class="blankline"></div>
    <p>Example with a linked list:</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">struct</span> Node
{
    <span class="d_keyword">int</span> i;
    Node* next;
}

<span class="d_comment">// range
</span><span class="d_keyword">struct</span> List
{
    Node* node;

    <span class="d_keyword">bool</span> empty() { <span class="d_keyword">return</span> node == <span class="d_keyword">null</span>; }

    <span class="d_keyword">ref</span> <span class="d_keyword">int</span> front() { <span class="d_keyword">return</span> node.i; }

    <span class="d_keyword">void</span> popFront() { node = node.next; }
}

<span class="d_keyword">void</span> main()
{
    <span class="d_keyword">import</span> std.stdio;
    <span class="d_keyword">auto</span> l = <span class="d_keyword">new</span> Node(1, <span class="d_keyword">new</span> Node(2, <span class="d_keyword">null</span>));
    <span class="d_keyword">auto</span> r = List(l);

    <span class="d_keyword">foreach</span> (e; r)
    {
        writeln(e);
    }
}
</pre>

</div>
<div class="blankline"></div>
<h4><a class="anchor" title="Permalink to this section" id="front-seq" href="#front-seq">Multiple Element Values</a></h4>
<div class="blankline"></div>
    <p>Multiple loop variables are allowed if the <span class="d_inlinecode donthyphenate notranslate">front</span> property returns a type that
        expands to a <a href="../spec/template.html#homogeneous_sequences">value sequence</a>
        whose length matches the number of variables. Each variable is assigned
        to the corresponding value in the sequence.
    </p>
<div class="blankline"></div>
        <div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">struct</span> Tuple(Types...) <span class="d_comment">// takes a TypeSeq
</span>{
    Types items; <span class="d_comment">// ValueSeq
</span>    <span class="d_keyword">alias</span> items <span class="d_keyword">this</span>; <span class="d_comment">// decay to a value sequence
</span>}

<span class="d_comment">// Infinite range with a repeating element, which is a tuple
</span><span class="d_keyword">struct</span> TupleRange
{
    <span class="d_keyword">enum</span> front = Tuple!(<span class="d_keyword">char</span>, <span class="d_keyword">bool</span>, <span class="d_keyword">int</span>)('a', <span class="d_keyword">true</span>, 2);
    <span class="d_keyword">enum</span> <span class="d_keyword">bool</span> empty = <span class="d_keyword">false</span>;

    <span class="d_keyword">void</span> popFront() {}
}

<span class="d_keyword">void</span> main()
{
    <span class="d_comment">// Tuple destructuring
</span>    <span class="d_keyword">foreach</span> (a, b, c; TupleRange())
    {
        <span class="d_keyword">assert</span>(a == 'a');
        <span class="d_keyword">assert</span>(b == <span class="d_keyword">true</span>);
        <span class="d_keyword">assert</span>(c == 2);
        <span class="d_keyword">break</span>;
    }
    <span class="d_comment">// Tuple variable
</span>    <span class="d_keyword">foreach</span> (tup; TupleRange())
    {
        <span class="d_keyword">assert</span>(tup[0] == 'a');
        <span class="d_keyword">assert</span>(tup == TupleRange.front);
        <span class="d_keyword">break</span>;
    }
}
</pre>
        
</div>
        <p>See also: <a href="../phobos/std_typecons.html#.Tuple"><span class="d_inlinecode donthyphenate notranslate">std.typecons.Tuple</span></a>.</p>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_over_delegates" href="#foreach_over_delegates">Foreach over Delegates</a></h3>
<div class="blankline"></div>
        <p>If <i>ForeachAggregate</i> is a delegate, the type signature and
        behavior of the delegate is the same as for
        <a href="#foreach_over_struct_and_classes">opApply</a>. This enables
        many different named looping strategies to coexist in the same
        class or struct.</p>
<div class="blankline"></div>
        <p>The delegate can generate the elements on the fly:</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_comment">// Custom loop implementation, that iterates over powers of 2 with
</span><span class="d_comment">// alternating sign. The foreach loop body is passed in dg.
</span><span class="d_keyword">int</span> myLoop(<span class="d_keyword">scope</span> <span class="d_keyword">int</span> <span class="d_keyword">delegate</span>(<span class="d_keyword">int</span>) dg)
{
    <span class="d_keyword">for</span> (<span class="d_keyword">int</span> z = 1; z &lt; 128; z *= -2)
    {
        <span class="d_keyword">auto</span> ret = dg(z);

        <span class="d_comment">// If the loop body contains a break, ret will be non-zero.
</span>        <span class="d_keyword">if</span> (ret != 0)
            <span class="d_keyword">return</span> ret;
    }
    <span class="d_keyword">return</span> 0;
}

<span class="d_comment">// Append each value in the iteration to an array
</span><span class="d_keyword">int</span>[] result;
<span class="d_keyword">foreach</span> (x; &amp;myLoop)
{
    result ~= x;
}
<span class="d_keyword">assert</span>(result == [1, -2, 4, -8, 16, -32, 64, -128]);
</pre>

</div>
<div class="blankline"></div>
        <p><span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span> with a delegate is an error.</p>
<div class="blankline"></div>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_over_tuples" href="#foreach_over_tuples">Foreach over Sequences</a></h3>
<div class="blankline"></div>
<p>        If the aggregate expression is a
        <a href="../spec/template.html#variadic-templates">sequence</a>,
        the loop body is statically expanded once for each element. This is
        the same as <a href="../spec/version.html#staticforeach">Static Foreach</a>
        on a sequence.
</p>
        <p>There
        can be one or two iteration symbols declared. If one, then the symbol
        is an <i>element alias</i> of each element in the sequence in turn.
</p>
<ul><li>        If the sequence is a <i>TypeSeq</i>, the element alias is set to each
        type in turn.
</li><li>        If the sequence is a <i>ValueSeq</i>, the element alias
        is set to each value in turn. If the type of the element alias
        is given, it must be compatible with the type of every sequence element.
        If no type is given, the type of the element alias will match the type
        of each sequence element, which may change between elements.
</li></ul>
<p>        If there are
        two symbols declared, the first is the <i>index variable</i>
        and the second is the <i>element alias</i>. The index
        must be of <span class="d_inlinecode donthyphenate notranslate">int</span>, <span class="d_inlinecode donthyphenate notranslate">uint</span>, <span class="d_inlinecode donthyphenate notranslate">long</span> or <span class="d_inlinecode donthyphenate notranslate">ulong</span> type,
        it cannot be <span class="d_inlinecode donthyphenate notranslate">ref</span>,
        and it is set to the index of each sequence element.
</p>
        <p>Example:</p>
<div class="blankline"></div>
<div class="runnable-examples" data-compile=''>
<pre class="d_code notranslate"><span class="d_keyword">import</span> std.meta : AliasSeq;

<span class="d_keyword">void</span> main()
{
    <span class="d_keyword">alias</span> Seq = AliasSeq!(<span class="d_keyword">int</span>, <span class="d_string">"literal"</span>, main);

    <span class="d_keyword">foreach</span> (<span class="d_keyword">int</span> i, sym; Seq)
    {
        <span class="d_keyword">pragma</span>(msg, i, <span class="d_string">": "</span>, sym.stringof);
    }
}
</pre>

</div>
        <p>Output:</p>
<div class="blankline"></div>
<pre class="console notranslate">0: int
1: "literal"
2: main()
</pre>
<div class="blankline"></div>
        <p>Example:</p>
<div class="blankline"></div>
<div class="runnable-examples" data-compile=''>
<pre class="d_code notranslate"><span class="d_keyword">void</span> fun()
{
    <span class="d_keyword">import</span> std.meta : AliasSeq;

    <span class="d_keyword">alias</span> values = AliasSeq!(7.4, <span class="d_string">"hi"</span>, [2,5]);

    <span class="d_keyword">foreach</span> (sym; values)
    {
        <span class="d_keyword">pragma</span>(msg, sym, <span class="d_string">" has type "</span>, <span class="d_keyword">typeof</span>(sym));
    }
}
</pre>

</div>
<div class="blankline"></div>
        <p>Output:</p>
<div class="blankline"></div>
<pre class="console notranslate">7.4 has type double
hi has type string
[2, 5] has type int[]
</pre>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_ref_parameters" href="#foreach_ref_parameters">Foreach Ref Parameters</a></h3>
<div class="blankline"></div>
        <p><span class="d_inlinecode donthyphenate notranslate">ref</span> can be used to modify the elements of the <em>ForeachAggregate</em>.
        This works for containers that expose lvalue elements, and
        <a href="../spec/template.html#lvalue-sequences">lvalue sequences</a>.
        </p>
<div class="blankline"></div>
    <div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">uint</span>[2] a = [7, 8];

<span class="d_keyword">foreach</span> (<span class="d_keyword">ref</span> u; a)
{
    u++;
}
<span class="d_keyword">foreach</span> (u; a)
{
    writeln(u);
}
</pre>
    
</div>
<div class="blankline"></div>
        which would print:
<div class="blankline"></div>
<pre class="console notranslate">8
9
</pre>
        <p><span class="d_inlinecode donthyphenate notranslate">ref</span> cannot be applied to an array index variable.</p>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="foreach_restrictions" href="#foreach_restrictions">Foreach Restrictions</a></h3>
<div class="blankline"></div>
        <p>The aggregate itself must not be resized, reallocated, free'd,
        reassigned or destructed
        while <span class="d_inlinecode donthyphenate notranslate">foreach</span> is iterating over the elements.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span>[] a = [1, 2, 3];
<span class="d_keyword">auto</span> fun = { a ~= 4; };

<span class="d_keyword">foreach</span> (<span class="d_keyword">int</span> v; a)
{
    <span class="d_comment">// resizing is unspecified!
</span>    fun();
    a ~= 4;
    a.length += 10;

    <span class="d_comment">// reallocating is unspecified!
</span>    a.reserve(10);

    <span class="d_comment">// reassigning is unspecified!
</span>    a = <span class="d_keyword">null</span>;
    a = [5, 6];
}
a ~= 4;   <span class="d_comment">// OK
</span>a = <span class="d_keyword">null</span>; <span class="d_comment">// OK
</span></pre>
<pre class="d_code notranslate"><span class="d_keyword">auto</span> aa = [1: 1, 2: 2];

<span class="d_keyword">foreach</span> (v; aa)
{
    aa[3] = 3; <span class="d_comment">// unspecified resize
</span>    aa.rehash; <span class="d_comment">// unspecified reallocation
</span>    aa = [4: 4]; <span class="d_comment">// unspecified reassign
</span>}
aa[3] = 3; <span class="d_comment">// OK
</span>aa = <span class="d_keyword">null</span>; <span class="d_comment">// OK
</span></pre>
<div class="blankline"></div>
        <div class="spec-boxes note"><b>Note:</b> Resizing or reassigning a dynamic or associative array during
        <span class="d_inlinecode donthyphenate notranslate">foreach</span> is still <span class="d_inlinecode donthyphenate notranslate">@safe</span>.
        </div>
<div class="blankline"></div>
<h3><span id="ForeachRangeStatement"><a class="anchor" title="Permalink to this section" id="foreach-range-statement" href="#foreach-range-statement">Foreach Range Statement</a></span></h3>
<div class="blankline"></div>
<p>A foreach range statement loops over the specified range.</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="RangeForeach"><span class="gname">RangeForeach</span></a>:
    <a href="#Foreach"><i>Foreach</i></a> <span class="d_inlinecode donthyphenate notranslate">(</span> <a href="#ForeachType"><i>ForeachType</i></a> <span class="d_inlinecode donthyphenate notranslate">;</span> <a href="#LwrExpression"><i>LwrExpression</i></a> <span class="d_inlinecode donthyphenate notranslate">..</span> <a href="#UprExpression"><i>UprExpression</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span>
<div class="blankline"></div>
<a id="LwrExpression"><span class="gname">LwrExpression</span></a>:
    <a href="../spec/expression.html#Expression"><i>Expression</i></a>
<div class="blankline"></div>
<a id="UprExpression"><span class="gname">UprExpression</span></a>:
    <a href="../spec/expression.html#Expression"><i>Expression</i></a>
<div class="blankline"></div>
<a id="ForeachRangeStatement"><span class="gname">ForeachRangeStatement</span></a>:
    <a href="#RangeForeach"><i>RangeForeach</i></a> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
</pre>
<div class="blankline"></div>
        <p>        <i>ForeachType</i> declares a variable with either an explicit type,
        or a common type inferred from <i>LwrExpression</i> and <i>UprExpression</i>.
        The <i>ScopeStatement</i> is then executed <i>n</i> times, where <i>n</i>
        is the result of <i>UprExpression</i> <span class="d_inlinecode donthyphenate notranslate">-</span> <i>LwrExpression</i>.
        If <i>UprExpression</i> is less than or equal to <i>LwrExpression</i>,
        the <i>ScopeStatement</i> is not executed.</p>
<div class="blankline"></div>
        <p>        If <i>Foreach</i> is <span class="d_inlinecode donthyphenate notranslate">foreach</span>, then the variable is set to
        <i>LwrExpression</i>, then incremented at the end of each iteration.
        If <i>Foreach</i> is <span class="d_inlinecode donthyphenate notranslate">foreach_reverse</span>, then the variable is set to
        <i>UprExpression</i>, then decremented before each iteration.
        <i>LwrExpression</i> and <i>UprExpression</i> are each evaluated
        exactly once, regardless of how many times the <i>ScopeStatement</i>
        is executed.
        </p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">int</span> foo()
{
    write(<span class="d_string">"foo"</span>);
    <span class="d_keyword">return</span> 10;
}

<span class="d_keyword">void</span> main()
{
    <span class="d_keyword">foreach</span> (i; 0 .. foo())
    {
        write(i);
    }
}
</pre>

</div>
<div class="blankline"></div>
prints:
<div class="blankline"></div>
<pre class="console notranslate">foo0123456789
</pre>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="SwitchStatement"><a class="anchor" title="Permalink to this section" id="switch-statement" href="#switch-statement">Switch Statement</a></span></h2>
<div class="blankline"></div>
        A switch statement goes to one of a collection of case
        statements depending on the value of the switch
        expression.
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="SwitchStatement"><span class="gname">SwitchStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">switch (</span> <a href="#IfCondition"><i>IfCondition</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
<div class="blankline"></div>
<a id="CaseStatement"><span class="gname">CaseStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">case</span> <a href="../spec/expression.html#ArgumentList"><i>ArgumentList</i></a> <span class="d_inlinecode donthyphenate notranslate">:</span> <a href="#ScopeStatementList"><i>ScopeStatementList</i></a><sub>opt</sub>
<div class="blankline"></div>
<a id="DefaultStatement"><span class="gname">DefaultStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">default :</span> <a href="#ScopeStatementList"><i>ScopeStatementList</i></a><sub>opt</sub>
<div class="blankline"></div>
<a id="ScopeStatementList"><span class="gname">ScopeStatementList</span></a>:
    <a href="#StatementListNoCaseNoDefault"><i>StatementListNoCaseNoDefault</i></a>
<div class="blankline"></div>
<a id="StatementListNoCaseNoDefault"><span class="gname">StatementListNoCaseNoDefault</span></a>:
    <a href="#StatementNoCaseNoDefault"><i>StatementNoCaseNoDefault</i></a>
    <a href="#StatementNoCaseNoDefault"><i>StatementNoCaseNoDefault</i></a> <i>StatementListNoCaseNoDefault</i>
<div class="blankline"></div>
<a id="StatementNoCaseNoDefault"><span class="gname">StatementNoCaseNoDefault</span></a>:
    <a href="#EmptyStatement"><i>EmptyStatement</i></a>
    <a href="#NonEmptyStatementNoCaseNoDefault"><i>NonEmptyStatementNoCaseNoDefault</i></a>
    <a href="#ScopeBlockStatement"><i>ScopeBlockStatement</i></a>
</pre>
<div class="blankline"></div>
        <p>The <em>Expression</em> from the <i>IfCondition</i> is evaluated.
        If the type of the <em>Expression</em> is an <span class="d_inlinecode donthyphenate notranslate">enum</span>, it is
        (recursively) converted to its <a href="../spec/enum.html#EnumBaseType"><i>EnumBaseType</i></a>.
        Then, if the type is an integral, the <em>Expression</em> undergoes
        <a href="../spec/type.html#integer-promotions">Integer Promotions</a>.
        Then, the type of the <em>Expression</em> must be either an integral or
        a static or dynamic array of <span class="d_inlinecode donthyphenate notranslate">char</span>, <span class="d_inlinecode donthyphenate notranslate">wchar</span>, or <span class="d_inlinecode donthyphenate notranslate">dchar</span>.
        </p>
<div class="blankline"></div>
        <p>If an <i>Identifier</i> <span class="d_inlinecode donthyphenate notranslate">=</span> prefix is provided, a variable is declared with that
        name, initialized to the value and type of the <em>Expression</em>. Its scope
        extends from when it is initialized to the end of the <em>ScopeStatement</em>.</p>
<div class="blankline"></div>
        <p>If <i>TypeCtors</i> and/or a specific type is provided for <em>Identifier</em>, those
        are used for the variable declaration which is initialized by an implicit
        conversion from the value of the <em>Expression</em>.</p>
<div class="blankline"></div>
        <p>The resulting value is
        compared against each of the case expressions. If there is
        a match, the corresponding case statement is transferred to.
        </p>
<div class="blankline"></div>
        <p>The case expressions in <i>ArgumentList</i>
        are a comma separated list of expressions.
        Each expression must evaluate to a compile-time value or array,
        or a runtime initialized const or immutable variable of integral type.
        Each expression must be implicitly convertible to the type of the switch
        <em>Expression</em>.</p>
<div class="blankline"></div>
        <p>Compile-time case values must all be distinct. Const or
        immutable runtime variables must all have different names.
        If two case expressions share a
        value, the first case statement with that value gets control.</p>
<div class="blankline"></div>
        <p>The <a href="#ScopeStatementList"><i>ScopeStatementList</i></a> introduces a new scope.
        </p>
<div class="blankline"></div>
        <p>A matching <span class="d_inlinecode donthyphenate notranslate">break</span> statement will exit the switch <i>BlockStatement</i>.</p>
<div class="blankline"></div>
        <p>A switch statement must have exactly one <em>DefaultStatement</em>.
        If none of the case expressions match, control is transferred
        to the default statement.
        </p>
<div class="blankline"></div>
        <div class="spec-boxes rationale"><b>Rationale:</b> This makes it clear that all possible cases are intentionally handled.
        See also: <a href="#final-switch-statement"><span class="d_inlinecode donthyphenate notranslate">final switch</span></a>.</div>


<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">foreach</span> (i; 2 .. 10)
{
    <span class="d_keyword">bool</span> prime;

    <span class="d_keyword">switch</span> (i)
    {
        <span class="d_keyword">case</span> 2, 3, 5, 7:
            prime = <span class="d_keyword">true</span>;
            <span class="d_keyword">break</span>;
        <span class="d_keyword">default</span>:
            prime = <span class="d_keyword">false</span>;
    }
    writeln(i, <span class="d_string">": "</span>, prime);
}
</pre>

</div>
        <p>Case statements and default statements associated with the switch
        can be nested within block statements; they do not have to be in
        the outermost block. For example, this is allowed:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">switch</span> (i)
{
    <span class="d_keyword">case</span> 1:
    {
        <span class="d_keyword">case</span> 2:
    }
    i++;
    <span class="d_keyword">break</span>;
    <span class="d_keyword">default</span>:
}
</pre>
<div class="blankline"></div>
        <p><b>Implementation Note:</b> The compiler's code generator may
        assume that the case
        statements are sorted by frequency of use, with the most frequent
        appearing first and the least frequent last. Although this is
        irrelevant as far as program correctness is concerned, it is of
        performance interest.
        </p>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="case-range" href="#case-range">Case Range Statement</a></h3>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="CaseRangeStatement"><span class="gname">CaseRangeStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">case</span> <a href="#FirstExp"><i>FirstExp</i></a> <span class="d_inlinecode donthyphenate notranslate">: .. case</span> <a href="#LastExp"><i>LastExp</i></a> <span class="d_inlinecode donthyphenate notranslate">:</span> <a href="#ScopeStatementList"><i>ScopeStatementList</i></a><sub>opt</sub>
<div class="blankline"></div>
<a id="FirstExp"><span class="gname">FirstExp</span></a>:
    <a href="../spec/expression.html#AssignExpression"><i>AssignExpression</i></a>
<div class="blankline"></div>
<a id="LastExp"><span class="gname">LastExp</span></a>:
    <a href="../spec/expression.html#AssignExpression"><i>AssignExpression</i></a>
</pre>
<div class="blankline"></div>
        <p>A <i>CaseRangeStatement</i> is a shorthand for listing a series
        of case statements from <i>FirstExp</i> to <i>LastExp</i>, inclusive.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">case</span> 1: .. <span class="d_keyword">case</span> 3:
</pre>
<div class="blankline"></div>
        <p>The above is equivalent to:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">case</span> 1, 2, 3:
</pre>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="no-implicit-fallthrough" href="#no-implicit-fallthrough">No Implicit Fall-Through</a></h3>
<div class="blankline"></div>
<div class="blankline"></div>
        <p>A <a href="#ScopeStatementList"><i>ScopeStatementList</i></a> must either be empty, or be ended with
        a <a href="#ContinueStatement"><i>ContinueStatement</i></a>, <a href="#BreakStatement"><i>BreakStatement</i></a>,
        <a href="#ReturnStatement"><i>ReturnStatement</i></a>, <a href="#GotoStatement"><i>GotoStatement</i></a>, <a href="../spec/expression.html#ThrowExpression"><i>ThrowExpression</i></a>
        or <span class="d_inlinecode donthyphenate notranslate">assert(0)</span> expression unless this is the last case.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">switch</span> (i)
{
    <span class="d_keyword">case</span> 1:
        message ~= <span class="d_string">"one"</span>;
        <span class="d_comment">// ERROR: implicit fall-through
</span>    <span class="d_keyword">case</span> 2:
        <span class="d_comment">// valid: the body is empty
</span>    <span class="d_keyword">default</span>:
        message ~= <span class="d_string">"unknown"</span>;
}
</pre>
<div class="blankline"></div>
        <p><span class="d_inlinecode donthyphenate notranslate">goto case;</span> can be used for explicit fall-through:</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate">string message;

<span class="d_keyword">foreach</span> (i; 1..5)
{
    <span class="d_keyword">switch</span> (i)
    {
        <span class="d_keyword">default</span>:    <span class="d_comment">// valid: ends with 'throw'
</span>            <span class="d_keyword">throw</span> <span class="d_keyword">new</span> Exception(<span class="d_string">"unknown number"</span>);

        <span class="d_keyword">case</span> 3:     <span class="d_comment">// valid: ends with 'break' (break out of the 'switch' only)
</span>            message ~= <span class="d_string">"three"</span>;
            <span class="d_keyword">break</span>;

        <span class="d_keyword">case</span> 4:     <span class="d_comment">// valid: ends with 'continue' (continue the enclosing loop)
</span>            message ~= <span class="d_string">"four"</span>;
            <span class="d_keyword">continue</span>; <span class="d_comment">// don't append a comma
</span>
        <span class="d_keyword">case</span> 1:     <span class="d_comment">// valid: ends with 'goto' (explicit fall-through to next case.)
</span>            message ~= <span class="d_string">"&gt;"</span>;
            <span class="d_keyword">goto</span> <span class="d_keyword">case</span>;

        <span class="d_keyword">case</span> 2:     <span class="d_comment">// valid: this is the last case in the switch statement.
</span>            message ~= <span class="d_string">"one or two"</span>;
    }
    message ~= <span class="d_string">", "</span>;
}
writeln(message);
</pre>

</div>
        <p><a href="#goto-statement"><span class="d_inlinecode donthyphenate notranslate">goto</span></a> also supports jumping to
        a specific case or the default case statement.</p>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="string-switch" href="#string-switch">String Switch</a></h3>
<div class="blankline"></div>
        <p>Strings can be used in switch expressions.
        For example:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate">string name;
...
<span class="d_keyword">switch</span> (name)
{
    <span class="d_keyword">case</span> <span class="d_string">"fred"</span>:
    <span class="d_keyword">case</span> <span class="d_string">"sally"</span>:
        ...
}
</pre>
<div class="blankline"></div>
        <p>For applications like command line switch processing, this
        can lead to much more straightforward code, being clearer and
        less error prone. <span class="d_inlinecode donthyphenate notranslate">char</span>, <span class="d_inlinecode donthyphenate notranslate">wchar</span> and <span class="d_inlinecode donthyphenate notranslate">dchar</span> strings are allowed.
        </p>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="FinalSwitchStatement"><a class="anchor" title="Permalink to this section" id="final-switch-statement" href="#final-switch-statement">Final Switch Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="FinalSwitchStatement"><span class="gname">FinalSwitchStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">final switch (</span> <a href="#IfCondition"><i>IfCondition</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
</pre>
<div class="blankline"></div>
        <p>A final switch statement is just like a switch statement,
        except that:</p>
<div class="blankline"></div>
        <ul>        <li>No <a href="#DefaultStatement"><i>DefaultStatement</i></a> is allowed.</li>
        <li>No <a href="#CaseRangeStatement"><i>CaseRangeStatement</i></a>s are allowed.</li>
        <li>If the switch <em>Expression</em> is of enum type, all
        the enum members must appear in the <a href="#CaseStatement"><i>CaseStatement</i></a>s.</li>
        <li>The case expressions cannot evaluate to a run time
        initialized value.</li>
        </ul>
<div class="blankline"></div>
        <div class="spec-boxes implementation-defined"><b>Implementation Defined:</b> If the <em>Expression</em> value does not match any
        of the <i>CaseRangeStatements</i>, whether that is diagnosed at compile
        time or at runtime.</div>


<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="ContinueStatement"><a class="anchor" title="Permalink to this section" id="continue-statement" href="#continue-statement">Continue Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="ContinueStatement"><span class="gname">ContinueStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">continue</span> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">;</span>
</pre>
<div class="blankline"></div>
        <p><span class="d_inlinecode donthyphenate notranslate">continue</span> aborts the current iteration of its innermost enclosing
        loop statement, and starts the next iteration.
        If the enclosing loop is a <span class="d_inlinecode donthyphenate notranslate">for</span> statement,
        its <a href="#Increment"><i>Increment</i></a> clause is executed.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate">string[] words = [<span class="d_string">"OK"</span>, <span class="d_string">"just"</span>, <span class="d_string">"longer"</span>, <span class="d_string">"words"</span>, <span class="d_string">"now"</span>];

<span class="d_keyword">foreach</span> (w; words)
{
    <span class="d_keyword">if</span> (w.length &lt; 4)
        <span class="d_keyword">continue</span>; <span class="d_comment">// skip writeln
</span>
    writeln(w);
}
</pre>

</div>
        <p>Output:</p>
<div class="blankline"></div>
<pre class="console notranslate">just
longer
words
</pre>
<div class="blankline"></div>
        <p>If <span class="d_inlinecode donthyphenate notranslate">continue</span> is followed by <i>Identifier</i>, the <i>Identifier</i>
        must be the label of an enclosing loop statement,
        and the next iteration of that loop is executed.
        It is an error if
        there is no such statement.</p>
<div class="blankline"></div>
<pre class="d_code notranslate">outer:
<span class="d_keyword">foreach</span> (item; list)
{
    <span class="d_comment">// try 3 times
</span>    <span class="d_keyword">foreach</span> (i; 0 .. 3)
    {
        <span class="d_keyword">if</span> (item.buy())
            <span class="d_keyword">continue</span> outer; <span class="d_comment">// skip to next item
</span>
        log(<span class="d_string">"attempt failed"</span>);
    }
}
</pre>
<div class="blankline"></div>
        <p>Any intervening <a href="#try-statement"><span class="d_inlinecode donthyphenate notranslate">finally</span></a> clauses are executed,
        and any intervening synchronization objects are released.</p>
<div class="blankline"></div>
        <p><span class="d_inlinecode donthyphenate notranslate">Note:</span> If a <span class="d_inlinecode donthyphenate notranslate">finally</span> clause executes a <span class="d_inlinecode donthyphenate notranslate">throw</span> out of the finally
        clause, the continue target is never reached.</p>
<div class="blankline"></div>
<h2><span id="BreakStatement"><a class="anchor" title="Permalink to this section" id="break-statement" href="#break-statement">Break Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="BreakStatement"><span class="gname">BreakStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">break</span> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">;</span>
</pre>
<div class="blankline"></div>
<p><span class="d_inlinecode donthyphenate notranslate">break</span> exits the innermost enclosing loop or <a href="#switch-statement"><span class="d_inlinecode donthyphenate notranslate">switch</span></a>
statement, resuming execution at the statement following it.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">const</span> n = 55;

<span class="d_comment">// find the smallest factor of n
</span><span class="d_keyword">foreach</span> (i; 2 .. n)
{
    writeln(<span class="d_string">"Trying: "</span>, i);
    <span class="d_keyword">if</span> (n % i == 0)
    {
        writeln(<span class="d_string">"smallest factor is "</span>, i);
        <span class="d_keyword">break</span>; <span class="d_comment">// stop looking
</span>    }
}
writeln(<span class="d_string">"finished"</span>);
</pre>

</div>
        <p>Output:</p>
<div class="blankline"></div>
<pre class="console notranslate">Trying: 2
Trying: 3
Trying: 4
Trying: 5
smallest factor is 5
finished
</pre>
<div class="blankline"></div>
        <p>If <span class="d_inlinecode donthyphenate notranslate">break</span> is followed by <i>Identifier</i>, the <i>Identifier</i>
        must be the label of an enclosing loop or <span class="d_inlinecode donthyphenate notranslate">switch</span>
        statement, and that statement is exited. It is an error if
        there is no such statement.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_comment">// display messages cyclically until the shop is closed
</span>outer:
<span class="d_keyword">while</span> (<span class="d_keyword">true</span>)
{
    <span class="d_keyword">foreach</span> (msg; messages)
    {
        <span class="d_keyword">if</span> (shop.isClosed())
            <span class="d_keyword">break</span> outer; <span class="d_comment">// end the while loop
</span>
        display(msg);
    }
}
display(<span class="d_string">"opens at 9am"</span>);
</pre>
<div class="blankline"></div>
        <p>Any intervening <a href="#try-statement"><span class="d_inlinecode donthyphenate notranslate">finally</span></a> clauses are executed,
        and any intervening synchronization objects are released.</p>
<div class="blankline"></div>
        <p><span class="d_inlinecode donthyphenate notranslate">Note:</span> If a <span class="d_inlinecode donthyphenate notranslate">finally</span> clause executes a <span class="d_inlinecode donthyphenate notranslate">throw</span> out of the finally
        clause, the break target is never reached.</p>
<div class="blankline"></div>
<h2><span id="ReturnStatement"><a class="anchor" title="Permalink to this section" id="return-statement" href="#return-statement">Return Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="ReturnStatement"><span class="gname">ReturnStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">return</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">;</span>
</pre>
<div class="blankline"></div>
<p><span class="d_inlinecode donthyphenate notranslate">return</span> exits the current function and supplies its
<a href="../spec/function.html#function-return-values">return value</a>.</p>
<div class="blankline"></div>
<p><em>Expression</em> is required if the function specifies a return type that is
not void. The <em>Expression</em> is implicitly converted to the function return
type.</p>
<div class="blankline"></div>
<p>        An <em>Expression</em> of type void is allowed if the function specifies
        a void return type. The <em>Expression</em> will be evaluated,
        but nothing will be returned. This is useful in generic programming.
</p>
        <p>Before the function actually returns,
        any objects with <span class="d_inlinecode donthyphenate notranslate">scope</span> storage duration are destroyed,
        any enclosing <span class="d_inlinecode donthyphenate notranslate">finally</span> clauses are executed,
        any <span class="d_inlinecode donthyphenate notranslate">scope(exit)</span> statements are executed,
        any <span class="d_inlinecode donthyphenate notranslate">scope(success)</span> statements are executed,
        and any enclosing synchronization
        objects are released.</p>
<div class="blankline"></div>
        <p>The function will not return if any enclosing <span class="d_inlinecode donthyphenate notranslate">finally</span> clause
        does a return, goto or throw that exits the <span class="d_inlinecode donthyphenate notranslate">finally</span> clause.</p>
<div class="blankline"></div>
        <p>If there is an <a href="../spec/function.html#postconditions"><span class="d_inlinecode donthyphenate notranslate">out</span> postcondition</a>,
        that postcondition is executed
        after the <em>Expression</em> is evaluated and before the function
        actually returns.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span> foo(<span class="d_keyword">int</span> x)
{
    <span class="d_keyword">return</span> x + 3;
}
</pre>
<div class="blankline"></div>
<h2><span id="GotoStatement"><a class="anchor" title="Permalink to this section" id="goto-statement" href="#goto-statement">Goto Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="GotoStatement"><span class="gname">GotoStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">goto</span> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a> <span class="d_inlinecode donthyphenate notranslate">;</span>
    <span class="d_inlinecode donthyphenate notranslate">goto</span> <span class="d_inlinecode donthyphenate notranslate">default</span> <span class="d_inlinecode donthyphenate notranslate">;</span>
    <span class="d_inlinecode donthyphenate notranslate">goto</span> <span class="d_inlinecode donthyphenate notranslate">case</span> <span class="d_inlinecode donthyphenate notranslate">;</span>
    <span class="d_inlinecode donthyphenate notranslate">goto</span> <span class="d_inlinecode donthyphenate notranslate">case</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a> <span class="d_inlinecode donthyphenate notranslate">;</span>
</pre>
<div class="blankline"></div>
<p><span class="d_inlinecode donthyphenate notranslate">goto</span> transfers to the statement labeled with <i>Identifier</i>.</p>
<div class="blankline"></div>
<pre class="d_code notranslate">    <span class="d_keyword">if</span> (foo)
        <span class="d_keyword">goto</span> L1;
    x = 3;
L1:
    x++;
</pre>
<div class="blankline"></div>
<p>The second form, <span class="d_inlinecode donthyphenate notranslate">goto default;</span>, transfers to the innermost <a href="#DefaultStatement"><i>DefaultStatement</i></a> of an enclosing <a href="#SwitchStatement"><i>SwitchStatement</i></a>.</p>
<div class="blankline"></div>
        <p>The third form, <span class="d_inlinecode donthyphenate notranslate">goto case;</span>, transfers to the
        next <a href="#CaseStatement"><i>CaseStatement</i></a> of the innermost enclosing
        <a href="#SwitchStatement"><i>SwitchStatement</i></a>.</p>
<div class="blankline"></div>
        <p>The fourth form, <span class="d_inlinecode donthyphenate notranslate">goto case</span> <em>Expression</em><span class="d_inlinecode donthyphenate notranslate">;</span>, transfers to the
        <a href="#CaseStatement"><i>CaseStatement</i></a> of the innermost enclosing
        <a href="#SwitchStatement"><i>SwitchStatement</i></a>
        with a matching <em>Expression</em>.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">switch</span> (x)
{
    <span class="d_keyword">case</span> 3:
        <span class="d_keyword">goto</span> <span class="d_keyword">case</span>;
    <span class="d_keyword">case</span> 4:
        <span class="d_keyword">goto</span> <span class="d_keyword">default</span>;
    <span class="d_keyword">case</span> 5:
        <span class="d_keyword">goto</span> <span class="d_keyword">case</span> 4;
    <span class="d_keyword">default</span>:
        x = 4;
        <span class="d_keyword">break</span>;
}
</pre>
<div class="blankline"></div>
<p>Any intervening finally clauses are executed, along with releasing any
intervening synchronization mutexes.</p>
<div class="blankline"></div>
        <p>It is illegal for a <i>GotoStatement</i> to be used to skip
        initializations.</p>
<div class="blankline"></div>
<h2><span id="WithStatement"><a class="anchor" title="Permalink to this section" id="with-statement" href="#with-statement">With Statement</a></span></h2>
<div class="blankline"></div>
<p>The <span class="d_inlinecode donthyphenate notranslate">with</span> statement is a way to simplify repeated references to the same
object.</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="WithStatement"><span class="gname">WithStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">with</span> <span class="d_inlinecode donthyphenate notranslate">(</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">with</span> <span class="d_inlinecode donthyphenate notranslate">(</span> <a href="../spec/template.html#Symbol"><i>Symbol</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">with</span> <span class="d_inlinecode donthyphenate notranslate">(</span> <a href="../spec/template.html#TemplateInstance"><i>TemplateInstance</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
</pre>
<div class="blankline"></div>
        where <em>Expression</em> evaluates to one of:
<div class="blankline"></div>
        <ul>        <li>a class reference</li>
        <li>a struct instance</li>
        <li>an enum instance</li>
        <li>a pointer to one of the above</li>
        </ul>
<div class="blankline"></div>
        Within the with body the referenced object is searched first for
        identifier symbols.
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">enum</span> E { A, B }

<span class="d_keyword">void</span> test(E e)
{
    <span class="d_keyword">with</span> (e)       <span class="d_comment">// affects the switch statement
</span>    <span class="d_keyword">switch</span> (e)
    {
        <span class="d_keyword">case</span> A:    <span class="d_comment">// no need for E.A
</span>        <span class="d_keyword">case</span> B:
        <span class="d_keyword">default</span>:
            <span class="d_keyword">break</span>;
    }
}
</pre>
<div class="blankline"></div>
<p>Below, if <span class="d_inlinecode donthyphenate notranslate">ident</span> is a member of the type of <span class="d_inlinecode donthyphenate notranslate">expression</span>, the <i>WithStatement</i>:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">with</span> (expression)
{
    ...
    ident;
}
</pre>
<div class="blankline"></div>
        is semantically equivalent to:
<div class="blankline"></div>
<pre class="d_code notranslate">(<span class="d_keyword">auto</span> <span class="d_keyword">ref</span> tmp)
{
    ...
    tmp.ident;
}(expression);
</pre>
<div class="blankline"></div>
        <p>Note that <em>Expression</em> only gets evaluated once and is not copied.
        The with statement does not change what <span class="d_inlinecode donthyphenate notranslate">this</span> or
        <span class="d_inlinecode donthyphenate notranslate">super</span> refer to.
        </p>
<div class="blankline"></div>
        <p>For <i>Symbol</i> which is a scope or <i>TemplateInstance</i>,
        the corresponding scope is searched when looking up symbols.
        For example:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> Foo
{
    <span class="d_keyword">alias</span> Y = <span class="d_keyword">int</span>;
}
...
Y y;        <span class="d_comment">// error, Y undefined
</span><span class="d_keyword">with</span> (Foo)
{
    Y y;    <span class="d_comment">// same as Foo.Y y;
</span>}
</pre>
<div class="blankline"></div>
        <p>Use of <span class="d_inlinecode donthyphenate notranslate">with</span> object symbols that shadow local symbols with
        the same identifier are not allowed.
        This is to reduce the risk of inadvertent breakage of with
        statements when new members are added to the object declaration.
        </p>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">float</span> x;
}

<span class="d_keyword">void</span> main()
{
    <span class="d_keyword">int</span> x;
    S s;
    <span class="d_keyword">with</span> (s)
    {
        x++;  <span class="d_comment">// error, shadows the int x declaration
</span>    }
}
</pre>
<div class="blankline"></div>
        <p>In nested <i>WithStatement</i>s, the inner-most scope takes precedence.  If
        a symbol cannot be resolved at the inner-most scope, resolution is forwarded
        incrementally up the scope hierarchy.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">struct</span> Foo
{
    <span class="d_keyword">void</span> f() { writeln(<span class="d_string">"Foo.f"</span>); }
}

<span class="d_keyword">struct</span> Bar
{
    <span class="d_keyword">void</span> f() { writeln(<span class="d_string">"Bar.f"</span>); }
}

<span class="d_keyword">struct</span> Baz
{
    <span class="d_comment">// f() is not implemented
</span>}

<span class="d_keyword">void</span> f()
{
    writeln(<span class="d_string">"f"</span>);
}

<span class="d_keyword">void</span> main()
{
    Foo foo;
    Bar bar;
    Baz baz;

    f();               <span class="d_comment">// prints "f"
</span>
    <span class="d_keyword">with</span>(foo)
    {
        f();           <span class="d_comment">// prints "Foo.f"
</span>
        <span class="d_keyword">with</span>(bar)
        {
            f();       <span class="d_comment">// prints "Bar.f"
</span>
            <span class="d_keyword">with</span>(baz)
            {
                f();   <span class="d_comment">// prints "Bar.f".  `Baz` does not implement `f()` so
</span>                       <span class="d_comment">// resolution is forwarded to `with(bar)`'s scope
</span>            }
        }
        <span class="d_keyword">with</span>(baz)
        {
            f();       <span class="d_comment">// prints "Foo.f".  `Baz` does not implement `f()` so
</span>                       <span class="d_comment">// resolution is forwarded to `with(foo)`'s scope
</span>        }
    }
    <span class="d_keyword">with</span>(baz)
    {
        f();           <span class="d_comment">// prints "f".  `Baz` does not implement `f()` so
</span>                       <span class="d_comment">// resolution is forwarded to `main`'s scope. `f()` is
</span>                       <span class="d_comment">// not implemented in `main`'s scope, so resolution is
</span>                       <span class="d_comment">// subsequently forward to module scope.
</span>    }
}
</pre>

</div>
<div class="blankline"></div>
<h2><span id="SynchronizedStatement"><a class="anchor" title="Permalink to this section" id="synchronized-statement" href="#synchronized-statement">Synchronized Statement</a></span></h2>
<div class="blankline"></div>
        <p>The synchronized statement wraps a statement with
        mutex locking and unlocking to synchronize access among multiple threads.
        </p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="SynchronizedStatement"><span class="gname">SynchronizedStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">synchronized</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">synchronized (</span> <a href="../spec/expression.html#Expression"><i>Expression</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a>
</pre>
<div class="blankline"></div>
        <p>A synchronized statement without <em>Expression</em> allows only one thread
        at a time to execute <i>ScopeStatement</i> by locking a mutex.
        A global mutex is created, one per synchronized statement.
        Different synchronized statements will have different global mutexes.
        </p>
<div class="blankline"></div>
        <p>If there is an <em>Expression</em>, it must evaluate to either an
        Object or an instance of an <a href="../spec/interface.html">interface</a>,
        in which case it
        is cast to the Object instance that implemented that interface.
        The mutex used is specific to that Object instance, and
        is shared by all synchronized statements referring to that instance.
        If the object's mutex is already locked when reaching the synchronized
        statement, it will block every thread until that mutex is unlocked by
        other code.
        </p>
<div class="blankline"></div>
<div class="panel"><div class="runnable-examples" data-compile=''>
<pre class="d_code notranslate"><span class="d_keyword">void</span> work();

<span class="d_keyword">void</span> f(Object o)
{
    <span class="d_keyword">synchronized</span> (o) work();
}

<span class="d_keyword">void</span> g(Object o)
{
    <span class="d_keyword">synchronized</span> (o) work();
}
</pre>

</div>
        <p>If <span class="d_inlinecode donthyphenate notranslate">f</span> and <span class="d_inlinecode donthyphenate notranslate">g</span> are called by different threads but with the same
        argument, the <span class="d_inlinecode donthyphenate notranslate">work</span> calls cannot execute simultaneously. If the
        <span class="d_inlinecode donthyphenate notranslate">(o)</span> part of the <span class="d_inlinecode donthyphenate notranslate">synchronized</span> statements is removed in one
        or both functions, then both <span class="d_inlinecode donthyphenate notranslate">work</span> calls could execute
        simultaneously, because they would be protected by different mutexes.</p>
</div>
        <p>The synchronization gets released even if <i>ScopeStatement</i>
        terminates with an exception, goto, or return.
        </p>
<div class="blankline"></div>
        <p>This implements a standard critical section.
        </p>
<div class="blankline"></div>
        <p>Synchronized statements support recursive locking; that is, a
        function wrapped in synchronized is allowed to recursively call
        itself and the behavior will be as expected: The mutex will be
        locked and unlocked as many times as there is recursion.
        </p>
<div class="blankline"></div>
        <p>See also <a href="../spec/class.html#synchronized-classes">synchronized classes</a>.</p>
<div class="blankline"></div>
<h2><span id="TryStatement"><a class="anchor" title="Permalink to this section" id="try-statement" href="#try-statement">Try Statement</a></span></h2>
<div class="blankline"></div>
<p>Exception handling is done with the try-catch-finally statement.</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="TryStatement"><span class="gname">TryStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">try</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a> <a href="#Catches"><i>Catches</i></a>
    <span class="d_inlinecode donthyphenate notranslate">try</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a> <a href="#Catches"><i>Catches</i></a> <a href="#FinallyStatement"><i>FinallyStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">try</span> <a href="#ScopeStatement"><i>ScopeStatement</i></a> <a href="#FinallyStatement"><i>FinallyStatement</i></a>
<div class="blankline"></div>
<a id="Catches"><span class="gname">Catches</span></a>:
    <a href="#Catch"><i>Catch</i></a>
    <a href="#Catch"><i>Catch</i></a> <i>Catches</i>
<div class="blankline"></div>
<a id="Catch"><span class="gname">Catch</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">catch (</span> <a href="#CatchParameter"><i>CatchParameter</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <a href="#NoScopeNonEmptyStatement"><i>NoScopeNonEmptyStatement</i></a>
<div class="blankline"></div>
<a id="CatchParameter"><span class="gname">CatchParameter</span></a>:
    <a href="../spec/type.html#BasicType"><i>BasicType</i></a> <a href="../spec/lex.html#Identifier"><i>Identifier</i></a><sub>opt</sub>
<div class="blankline"></div>
<a id="FinallyStatement"><span class="gname">FinallyStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">finally</span> <a href="#NoScopeNonEmptyStatement"><i>NoScopeNonEmptyStatement</i></a>
</pre>
<div class="blankline"></div>
        <p><i>CatchParameter</i> declares a variable v of type T, where T is
        Throwable or derived from Throwable. v is initialized by the throw
        expression if T is of the same type or a base class of the throw
        expression. The catch clause will be executed if the exception object is
        of type T or derived from T.</p>
<div class="blankline"></div>
        <p>If just type T is given and no variable v, then the catch clause
        is still executed.
        </p>
<div class="blankline"></div>
        <p>It is an error if any <i>CatchParameter</i> type T1 hides
        a subsequent <i>Catch</i> with type T2, i.e. it is an error if
        T1 is the same type as or a base class of T2.
        </p>
<div class="blankline"></div>
        <p>The <i>FinallyStatement</i> is always executed, whether
        the <span class="d_inlinecode donthyphenate notranslate">try</span> <i>ScopeStatement</i> exits with a goto, break,
        continue, return, exception, or fall-through.
        </p>
<div class="blankline"></div>
        <p>If an exception is raised in the <i>FinallyStatement</i> and is not
        caught before the original exception is caught, it is chained to the
        previous exception via the <i>next</i> member of <i>Throwable</i>.
        Note that, in contrast to most other programming languages, the new
        exception does not replace the original exception. Instead, later
        exceptions are regarded as 'collateral damage' caused by the first
        exception. The original exception must be caught, and this results in
        the capture of the entire chain.
        </p>
<div class="blankline"></div>
        <p>Thrown objects derived from the <a href="https://dlang.org/phobos/object.html#.Error"><span class="d_inlinecode donthyphenate notranslate">Error</span></a> class are treated differently. They
        bypass the normal chaining mechanism, such that the chain can only be
        caught by catching the first <span class="d_inlinecode donthyphenate notranslate">Error</span>. In addition to the list of
        subsequent exceptions, <span class="d_inlinecode donthyphenate notranslate">Error</span> also contains a pointer that points
        to the original exception (the head of the chain) if a bypass occurred,
        so that the entire exception history is retained.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">int</span> main()
{
    <span class="d_keyword">try</span>
    {
        <span class="d_keyword">try</span>
        {
            <span class="d_keyword">throw</span> <span class="d_keyword">new</span> Exception(<span class="d_string">"first"</span>);
        }
        <span class="d_keyword">finally</span>
        {
            writeln(<span class="d_string">"finally"</span>);
            <span class="d_keyword">throw</span> <span class="d_keyword">new</span> Exception(<span class="d_string">"second"</span>);
        }
    }
    <span class="d_keyword">catch</span> (Exception e)
    {
        writefln(<span class="d_string">"catch %s"</span>, e.msg);
    }
    writeln(<span class="d_string">"done"</span>);
    <span class="d_keyword">return</span> 0;
}
</pre>

</div>
<div class="blankline"></div>
    prints:
<div class="blankline"></div>
<pre class="console notranslate">finally
catch first
done
</pre>
<div class="blankline"></div>
<div class="blankline"></div>
        <p>A <i>FinallyStatement</i> may not exit with a goto, break,
        continue, or return; nor may it be entered with a goto.
        </p>
<div class="blankline"></div>
        <p>A <i>FinallyStatement</i> may not contain any <i>Catches</i>.
        This restriction may be relaxed in future versions.
        </p>
<div class="blankline"></div>
<h2><span id="ScopeGuardStatement"><a class="anchor" title="Permalink to this section" id="scope-guard-statement" href="#scope-guard-statement">Scope Guard Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="ScopeGuardStatement"><span class="gname">ScopeGuardStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">scope ( exit )</span> <a href="#NonEmptyOrScopeBlockStatement"><i>NonEmptyOrScopeBlockStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">scope ( success )</span> <a href="#NonEmptyOrScopeBlockStatement"><i>NonEmptyOrScopeBlockStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">scope ( failure )</span> <a href="#NonEmptyOrScopeBlockStatement"><i>NonEmptyOrScopeBlockStatement</i></a>
</pre>
<div class="blankline"></div>
<p>The <i>ScopeGuardStatement</i> executes <em>NonEmptyOrScopeBlockStatement</em> at the close of the
current scope, rather than at the point where the <i>ScopeGuardStatement</i>
appears. <span class="d_inlinecode donthyphenate notranslate">scope(exit)</span> executes <em>NonEmptyOrScopeBlockStatement</em> when the scope exits normally
or when it exits due to exception unwinding. <span class="d_inlinecode donthyphenate notranslate">scope(failure)</span> executes
<em>NonEmptyOrScopeBlockStatement</em> when the scope exits due to exception unwinding.
<span class="d_inlinecode donthyphenate notranslate">scope(success)</span> executes <em>NonEmptyOrScopeBlockStatement</em> when the scope exits normally.</p>
<div class="blankline"></div>
        <p>If there are multiple <i>ScopeGuardStatement</i>s in a scope, they
        will be executed in the reverse lexical order in which they appear.
        If any scope instances are to be destroyed upon the close of the
        scope, their destructions will be interleaved with the <i>ScopeGuardStatement</i>s
        in the reverse lexical order in which they appear.</p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate">write(<span class="d_string">"1"</span>);
{
    write(<span class="d_string">"2"</span>);
    <span class="d_keyword">scope</span>(exit) write(<span class="d_string">"3"</span>);
    <span class="d_keyword">scope</span>(exit) write(<span class="d_string">"4"</span>);
    write(<span class="d_string">"5"</span>);
}
writeln();
</pre>

</div>
<div class="blankline"></div>
        writes:
<div class="blankline"></div>
<pre class="console notranslate">12543
</pre>
<div class="blankline"></div>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate">{
    <span class="d_keyword">scope</span>(exit) write(<span class="d_string">"1"</span>);
    <span class="d_keyword">scope</span>(success) write(<span class="d_string">"2"</span>);
    <span class="d_keyword">scope</span>(exit) write(<span class="d_string">"3"</span>);
    <span class="d_keyword">scope</span>(success) write(<span class="d_string">"4"</span>);
}
writeln();
</pre>

</div>
<div class="blankline"></div>
        writes:
<div class="blankline"></div>
<pre class="console notranslate">4321
</pre>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">struct</span> Foo
{
    <span class="d_keyword">this</span>(string s) { write(s); }
    ~<span class="d_keyword">this</span>() { write(<span class="d_string">"1"</span>); }
}

<span class="d_keyword">try</span>
{
    <span class="d_keyword">scope</span>(exit) write(<span class="d_string">"2"</span>);
    <span class="d_keyword">scope</span>(success) write(<span class="d_string">"3"</span>);
    Foo f = Foo(<span class="d_string">"0"</span>);
    <span class="d_keyword">scope</span>(failure) write(<span class="d_string">"4"</span>);
    <span class="d_keyword">throw</span> <span class="d_keyword">new</span> Exception(<span class="d_string">"msg"</span>);
    <span class="d_keyword">scope</span>(exit) write(<span class="d_string">"5"</span>);
    <span class="d_keyword">scope</span>(success) write(<span class="d_string">"6"</span>);
    <span class="d_keyword">scope</span>(failure) write(<span class="d_string">"7"</span>);
}
<span class="d_keyword">catch</span> (Exception e)
{
}
writeln();
</pre>

</div>
<div class="blankline"></div>
        writes:
<div class="blankline"></div>
<pre class="console notranslate">0412
</pre>
<div class="blankline"></div>
        A <span class="d_inlinecode donthyphenate notranslate">scope(exit)</span> or <span class="d_inlinecode donthyphenate notranslate">scope(success)</span> statement
        may not exit with a throw, goto, break, continue, or
        return; nor may it be entered with a goto. A <span class="d_inlinecode donthyphenate notranslate">scope(failure)</span>
        statement may not exit with a return.
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">int</span> foo()
{
    <span class="d_keyword">scope</span>(exit) writeln(<span class="d_string">"Inside foo()"</span>);
    <span class="d_keyword">return</span> bar();
}

<span class="d_keyword">int</span> bar()
{
    writeln(<span class="d_string">"Inside bar()"</span>);
    <span class="d_keyword">return</span> 0;
}

<span class="d_keyword">int</span> main()
{
    foo();
    <span class="d_keyword">return</span> 0;
}
</pre>

</div>
<div class="blankline"></div>
        writes:
<div class="blankline"></div>
<pre class="console notranslate">Inside bar()
Inside foo()
</pre>
<div class="blankline"></div>
<h3><a class="anchor" title="Permalink to this section" id="catching_cpp_class_objects" href="#catching_cpp_class_objects">Catching C++ Class Objects</a></h3>
<div class="blankline"></div>
        <p>        On many platforms, catching C++ class objects is supported.
        Catching C++ objects and D objects cannot both be done
        in the same <i>TryStatement</i>.
        Upon exit from the <i>Catch</i>, any destructors for the C++
        object will be run and the storage used for it reclaimed.
        C++ objects cannot be caught in <span class="d_inlinecode donthyphenate notranslate">@safe</span> code.
        </p>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="asm" href="#asm">Asm Statement</a></h2>
<div class="blankline"></div>
<p>Inline assembler is supported with the asm statement:</p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="AsmStatement"><span class="gname">AsmStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">asm</span> <a href="../spec/function.html#FunctionAttributes"><i>FunctionAttributes</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">{</span> <a href="#AsmInstructionList"><i>AsmInstructionList</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">}</span>
<div class="blankline"></div>
<a id="AsmInstructionList"><span class="gname">AsmInstructionList</span></a>:
    <a href="../spec/iasm.html#AsmInstruction"><i>AsmInstruction</i></a> <span class="d_inlinecode donthyphenate notranslate">;</span>
    <a href="../spec/iasm.html#AsmInstruction"><i>AsmInstruction</i></a> <span class="d_inlinecode donthyphenate notranslate">;</span> <i>AsmInstructionList</i>
</pre>
<div class="blankline"></div>
<p>An asm statement enables the direct use of assembly language instructions.
This makes it easy to obtain direct access to special CPU features without
resorting to an external assembler. The D compiler will take care of the
function calling conventions, stack setup, etc.</p>
<div class="blankline"></div>
        <p>The format of the instructions is, of course, highly dependent
        on the native instruction set of the target CPU, and so is
        <a href="../spec/iasm.html">implementation defined</a>.
        But, the format will follow the following
        conventions:</p>
<div class="blankline"></div>
        <ul>        <li>It must use the same tokens as the D language uses.</li>
        <li>The comment form must match the D language comments.</li>
        <li>Asm instructions are terminated by a ;, not by an
        end of line.</li>
        </ul>
<div class="blankline"></div>
        These rules exist to ensure that D source code can be tokenized
        independently of syntactic or semantic analysis.
<div class="blankline"></div>
        <p>For example, for the Intel Pentium:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span> x = 3;
<span class="d_keyword">asm</span>
{
    mov EAX,x; <span class="d_comment">// load x and put it in register EAX
</span>}
</pre>
<div class="blankline"></div>
<p>Inline assembler can be used to access hardware directly:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">int</span> gethardware()
{
    <span class="d_keyword">asm</span>
    {
        mov EAX, dword ptr 0x1234;
    }
}
</pre>
<div class="blankline"></div>
<p>For some D implementations, such as a translator from D to C, an inline
assembler makes no sense, and need not be implemented. The version statement can
be used to account for this:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">version</span> (D_InlineAsm_X86)
{
    <span class="d_keyword">asm</span>
    {
        ...
    }
}
<span class="d_keyword">else</span>
{
    <span class="d_comment">/* ... some workaround ... */</span>
}
</pre>
<div class="blankline"></div>
        <p>Semantically consecutive <i>AsmStatement</i>s shall not have
        any other instructions (such as register save or restores) inserted
        between them by the compiler.
        </p>
<div class="blankline"></div>
<h2><span id="PragmaStatement"><a class="anchor" title="Permalink to this section" id="pragma-statement" href="#pragma-statement">Pragma Statement</a></span></h2>
<div class="blankline"></div>
<p>See <a href="../spec/pragma.html#PragmaStatement"><i>PragmaStatement</i></a></p>.
<div class="blankline"></div>
<h2><span id="MixinStatement"><a class="anchor" title="Permalink to this section" id="mixin-statement" href="#mixin-statement">Mixin Statement</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="MixinStatement"><span class="gname">MixinStatement</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">mixin</span> <span class="d_inlinecode donthyphenate notranslate">(</span> <a href="../spec/expression.html#ArgumentList"><i>ArgumentList</i></a> <span class="d_inlinecode donthyphenate notranslate">)</span> <span class="d_inlinecode donthyphenate notranslate">;</span>
</pre>
<div class="blankline"></div>
    <p>Each <a href="../spec/expression.html#AssignExpression"><i>AssignExpression</i></a> in the <i>ArgumentList</i> is
        evaluated at compile time, and the result must be representable
        as a string.
        The resulting strings are concatenated to form a string.
        The text contents of the string must be compilable as a valid
        <a href="#StatementList"><i>StatementList</i></a>, and is compiled as such.
        </p>
<div class="blankline"></div>
<div class="runnable-examples">
<pre class="d_code notranslate"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">void</span> main()
{
    <span class="d_keyword">int</span> i = 0;
    <span class="d_keyword">mixin</span>(<span class="d_string">"
        int x = 3;
        for (; i &lt; 3; i++)
            writeln(x + i, i);
        "</span>);    <span class="d_comment">// ok
</span>
    <span class="d_keyword">enum</span> s = <span class="d_string">"int y;"</span>;
    <span class="d_keyword">mixin</span>(s);  <span class="d_comment">// ok
</span>    y = 4;     <span class="d_comment">// ok, mixin declared y
</span>
    string t = <span class="d_string">"y = 3;"</span>;
    <span class="d_comment">//mixin(t);  // error, t is not evaluatable at compile time
</span>    <span class="d_comment">//mixin("y =") 4; // error, string must be complete statement
</span>
    <span class="d_keyword">mixin</span>(<span class="d_string">"y ="</span> ~ <span class="d_string">"4;"</span>);  <span class="d_comment">// ok
</span>    <span class="d_keyword">mixin</span>(<span class="d_string">"y ="</span>, 2+2, <span class="d_string">";"</span>);  <span class="d_comment">// ok
</span>}
</pre>

</div>
<div class="blankline"></div>

<div style="float: left"><i class="fa fa-angle-left" aria-hidden="true"></i> <a href="../spec/expression.html">Expressions</a></div>
<div style="float: right"><a href="../spec/arrays.html">Arrays</a> <i class="fa fa-angle-right" aria-hidden="true"></i></div>
<div style="clear:both"></div>



        <div class="smallprint" id="copyright">Copyright &copy; 1999-2024 by the <a href="../foundation_overview.html">D Language Foundation</a> | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on (no date time)</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>


<script type="text/javascript" src="../js/listanchors.js"></script>
<script type="text/javascript">jQuery(document).ready(addVersionSelector);</script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
