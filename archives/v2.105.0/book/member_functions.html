
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2024 by the D Language Foundation
    All Rights Reserved.
    https://dlang.org/foundation_overview.html
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>Member Functions - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='Member Functions' class='doc'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href="."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li><a href='../calendar.html'>Calendar</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.libera.chat/d'>IRC</a></li>
    <li><a href='https://discord.gg/bMZk9Q4'>Community Discord</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='https://github.com/dlang'>GitHub</a></li>
    <li><a href='../bugstats.html'>Issues</a></li>
    <li><a href='https://wiki.dlang.org/Get_involved'>Get involved</a></li>
    <li class="menu-divider"><a href='../foundation/contributors.html'>Contributors</a></li>
    <li><a href='../foundation/index.html'>Foundation</a></li>
    <li><a href='..//security.html'>Security Team</a></li>
    <li><a href='../foundation/donate.html'>Donate</a></li>
    <li><a href='../foundation/sponsors.html'>Sponsors</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://tour.dlang.org'>Tour</a></li>
    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='https://run.dlang.io'>run.dlang.io</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option  value="dlang.org/spec">Language</option>
                    <option  value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/&amp;component=dlang.org&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5BMember Functions%5D&amp;version=D2&amp;bug_severity=enhancement">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/dlang.org/edit/master/d.en/member_functions.d">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1>Member Functions</h1>
        
        



<p>Although this chapter focuses only on structs, most of the information in this chapter is applicable to classes as well.
</p>

<p>In this chapter we will cover member functions of structs and define the special <code class="d_inline">toString()</code> member function that is used for representing objects in the <code class="d_inline">string</code> format.
</p>

<p>When a struct or class is defined, usually a number of functions are also defined alongside with it. We have seen examples of such functions in the earlier chapters: <code class="d_inline">addDuration()</code> and an overload of <code class="d_inline">info()</code> have been written specifically to be used with the <code class="d_inline">TimeOfDay</code> type. In a sense, these two functions define the <i>interface</i> of <code class="d_inline">TimeOfDay</code>.
</p>

<p>The first parameter of both <code class="d_inline">addDuration()</code> and <code class="d_inline">info()</code> has been the <code class="d_inline">TimeOfDay</code> object that each function would be operating on. Additionally, just like all of the other functions that we have seen so far, both of the functions have been defined at the <i>module level</i>, outside of any other scope.
</p>

<p>The concept of a set of functions determining the interface of a struct is very common. For that reason, functions that are closely related to a type can be defined within the body of that type.
</p>

<h5 class="subsection">Defining member functions</h5>

<p>Functions that are defined within the curly brackets of a <code class="d_inline">struct</code> are called <i>member functions</i>:
</p>

<pre class="d_code"><span class="d_keyword">struct</span> SomeStruct {
    <span class="d_keyword">void</span> <i>member_function</i>(<span class="d_comment">/* the parameters of the function */</span>) {
        <span class="d_comment">// ... the definition of the function ...
</span>    }

    <span class="d_comment">// ... the other members of the struct ...
</span>}
</pre>

<p>Member functions are accessed the same way as member variables, separated from the name of the object by a dot:
</p>

<pre class="d_code">    <i>object.member_function(arguments)</i>;
</pre>

<p>We have used member functions before when specifying <code class="d_inline">stdin</code> and <code class="d_inline">stdout</code> explicitly during input and output operations:
</p>

<pre class="d_code">    stdin.readf(<span class="d_string">" %s"</span>, &amp;number);
    stdout.writeln(number);
</pre>

<p>The <code class="d_inline">readf()</code> and <code class="d_inline">writeln()</code> above are member function calls, operating on the objects <code class="d_inline">stdin</code> and <code class="d_inline">stdout</code>, respectively.
</p>

<p>Let's define <code class="d_inline">info()</code> as a member function. Its previous definition has been the following:
</p>

<pre class="d_code"><span class="d_keyword">void</span> info(TimeOfDay time) {
    writef(<span class="d_string">"%02s:%02s"</span>, time.hour, time.minute);
}
</pre>

<p>Making <code class="d_inline">info()</code> a member function is not as simple as moving its definition inside the struct. The function must be modified in two ways:
</p>

<pre class="d_code"><span class="d_keyword">struct</span> TimeOfDay {
    <span class="d_keyword">int</span> hour;
    <span class="d_keyword">int</span> minute;

    <span class="d_keyword">void</span> info() {    <span class="d_comment">// (1)
</span>        writef(<span class="d_string">"%02s:%02s"</span>, hour, minute);    <span class="d_comment">// (2)
</span>    }
}
</pre>

<ol><li>The member function does not take the object explicitly as a parameter.</li>

<li>For that reason, it refers to the member variables simply as <code class="d_inline">hour</code> and <code class="d_inline">minute</code>.</li>
</ol>

<p>This is because member functions are always called on an existing object. The object is implicitly available to the member function:
</p>

<pre class="d_code">    <span class="d_keyword">auto</span> time = TimeOfDay(10, 30);
    <span class="hilite">time.</span>info();
</pre>

<p>The <code class="d_inline">info()</code> member function is being called on the <code class="d_inline">time</code> object above. The members <code class="d_inline">hour</code> and <code class="d_inline">minute</code> that are referred to within the function definition correspond to the members of the <code class="d_inline">time</code> object, specifically <code class="d_inline">time.hour</code> and <code class="d_inline">time.minute</code>.
</p>

<p>The member function call above is almost the equivalent of the following regular function call:
</p>

<pre class="d_code">    time.info();    <span class="d_comment">// member function
</span>    info(time);     <span class="d_comment">// regular function (the previous definition)
</span></pre>

<p>Whenever a member function is called on an object, the members of the object are implicitly accessible by the function:
</p>

<pre class="d_code">    <span class="d_keyword">auto</span> morning = TimeOfDay(10, 0);
    <span class="d_keyword">auto</span> evening = TimeOfDay(22, 0);

    <span class="hilite">morning.</span>info();
    write('-');
    <span class="hilite">evening.</span>info();
    writeln();
</pre>

<p>When called on <code class="d_inline">morning</code>, the <code class="d_inline">hour</code> and <code class="d_inline">minute</code> that are used inside the member function refer to <code class="d_inline">morning.hour</code> and <code class="d_inline">morning.minute</code>. Similarly, when called on <code class="d_inline">evening</code>, they refer to <code class="d_inline">evening.hour</code> and <code class="d_inline">evening.minute</code>:
</p>

<pre class="shell">10:00-22:00
</pre>

<h6><a id="ix_Member Functions.toString" content="toString"></a> <code class="d_inline">toString()</code> for <code class="d_inline">string</code> representations</h6>

<p>We have discussed the limitations of the <code class="d_inline">info()</code> function in the previous chapter. There is at least one more inconvenience with it: Although it prints the time in human-readable format, printing the <code class="d_inline">'-'</code> character and terminating the line still needs to be done explicitly by the programmer.
</p>

<p>However, it would be more convenient if <code class="d_inline">TimeOfDay</code> objects could be used as easy as fundamental types as in the following code:
</p>

<pre class="d_code">    writefln(<span class="d_string">"%s-%s"</span>, morning, evening);
</pre>

<p>In addition to reducing four lines of code to one, it would also allow printing objects to any stream:
</p>

<pre class="d_code">    <span class="d_keyword">auto</span> file = File(<span class="d_string">"time_information"</span>, <span class="d_string">"w"</span>);
    file.writefln(<span class="d_string">"%s-%s"</span>, morning, evening);
</pre>

<p>The <code class="d_inline">toString()</code> member function of user-defined types is treated specially: It is called automatically to produce the <code class="d_inline">string</code> representations of objects. <code class="d_inline">toString()</code> must return the <code class="d_inline">string</code> representation of the object.
</p>

<p>Without getting into more detail, let's first see how the <code class="d_inline">toString()</code> function is defined:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">struct</span> TimeOfDay {
    <span class="d_keyword">int</span> hour;
    <span class="d_keyword">int</span> minute;

    string toString() {
        <span class="d_keyword">return</span> <span class="d_string">"todo"</span>;
    }
}

<span class="d_keyword">void</span> main() {
    <span class="d_keyword">auto</span> morning = TimeOfDay(10, 0);
    <span class="d_keyword">auto</span> evening = TimeOfDay(22, 0);

    writefln(<span class="d_string">"%s-%s"</span>, morning, evening);
}
</pre>

<p><code class="d_inline">toString()</code> does not produce anything meaningful yet, but the output shows that it has been called by <code class="d_inline">writefln()</code> twice for the two object:
</p>

<pre class="shell">todo-todo
</pre>

<p>Also note that <code class="d_inline">info()</code> is not needed anymore. <code class="d_inline">toString()</code> is replacing its functionality.
</p>

<p>The simplest implementation of <code class="d_inline">toString()</code> would be to call <code class="d_inline">format()</code> of the <code class="d_inline">std.string</code> module. <code class="d_inline">format()</code> works in the same way as the formatted output functions like <code class="d_inline">writef()</code>. The only difference is that instead of printing variables, it returns the formatted result in <code class="d_inline">string</code> format.
</p>

<p><code class="d_inline">toString()</code> can simply return the result of <code class="d_inline">format()</code> directly:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.string;
<span class="d_comment">// ...
</span><span class="d_keyword">struct</span> TimeOfDay {
<span class="d_comment">// ...
</span>    string toString() {
        <span class="d_keyword">return</span> <span class="hilite">format</span>(<span class="d_string">"%02s:%02s"</span>, hour, minute);
    }
}
</pre>

<p>Note that <code class="d_inline">toString()</code> returns the representation of only <i>this</i> object. The rest of the output is handled by <code class="d_inline">writefln()</code>: It calls the <code class="d_inline">toString()</code> member function for the two objects separately, prints the <code class="d_inline">'-'</code> character in between, and finally terminates the line:
</p>

<pre class="shell">10:00-22:00
</pre>

<p>The definition of <code class="d_inline">toString()</code> that is explained above does not take any parameters; it simply produces a <code class="d_inline">string</code> and returns it. An alternative definition of <code class="d_inline">toString()</code> takes a <code class="d_inline">delegate</code> parameter. We will see that definition later in <a href="lambda.html">the Function Pointers, Delegates, and Lambdas chapter</a>.
</p>

<h6>Example: <code class="d_inline">increment()</code> member function</h6>

<p>Let's define a member function that adds a duration to <code class="d_inline">TimeOfDay</code> objects.
</p>

<p>Before doing that, let's first correct a design flaw that we have been living with. We have seen in the <a href="struct.html">Structs chapter</a> that adding two <code class="d_inline">TimeOfDay</code> objects in <code class="d_inline">addDuration()</code> is not a meaningful operation:
</p>

<pre class="d_code">TimeOfDay addDuration(TimeOfDay start,
                      TimeOfDay duration) {  <span class="d_comment">// meaningless
</span>    <span class="d_comment">// ...
</span>}
</pre>

<p>What is natural to add to a point in time is <i>duration</i>. For example, adding the travel duration to the departure time would result in the arrival time.
</p>

<p>On the other hand, subtracting two points in time is a natural operation, in which case the result would be a <i>duration</i>.
</p>

<p>The following program defines a <code class="d_inline">Duration</code> struct with minute-precision, and an <code class="d_inline">addDuration()</code> function that uses it:
</p>

<pre class="d_code"><span class="d_keyword">struct</span> Duration {
    <span class="d_keyword">int</span> minute;
}

TimeOfDay addDuration(TimeOfDay start,
                      Duration duration) {
    <span class="d_comment">// Begin with a copy of start
</span>    TimeOfDay result = start;

    <span class="d_comment">// Add the duration to it
</span>    result.minute += duration.minute;

    <span class="d_comment">// Take care of overflows
</span>    result.hour += result.minute / 60;
    result.minute %= 60;
    result.hour %= 24;

    <span class="d_keyword">return</span> result;
}

<span class="d_keyword">unittest</span> {
    <span class="d_comment">// A trivial test
</span>    <span class="d_keyword">assert</span>(addDuration(TimeOfDay(10, 30), Duration(10))
           == TimeOfDay(10, 40));

    <span class="d_comment">// A time at midnight
</span>    <span class="d_keyword">assert</span>(addDuration(TimeOfDay(23, 9), Duration(51))
           == TimeOfDay(0, 0));

    <span class="d_comment">// A time in the next day
</span>    <span class="d_keyword">assert</span>(addDuration(TimeOfDay(17, 45), Duration(8 * 60))
           == TimeOfDay(1, 45));
}
</pre>

<p>Let's redefine a similar function this time as a member function. <code class="d_inline">addDuration()</code> has been producing a new object as its result. Let's define an <code class="d_inline">increment()</code> member function that will directly modify <i>this</i> object instead:
</p>

<pre class="d_code"><span class="d_keyword">struct</span> Duration {
    <span class="d_keyword">int</span> minute;
}

<span class="d_keyword">struct</span> TimeOfDay {
    <span class="d_keyword">int</span> hour;
    <span class="d_keyword">int</span> minute;

    string toString() {
        <span class="d_keyword">return</span> format(<span class="d_string">"%02s:%02s"</span>, hour, minute);
    }

    <span class="d_keyword">void</span> <span class="hilite">increment</span>(Duration duration) {
        minute += duration.minute;

        hour += minute / 60;
        minute %= 60;
        hour %= 24;
    }

    <span class="d_keyword">unittest</span> {
        <span class="d_keyword">auto</span> time = TimeOfDay(10, 30);

        <span class="d_comment">// A trivial test
</span>        time<span class="hilite">.increment</span>(Duration(10));
        <span class="d_keyword">assert</span>(time == TimeOfDay(10, 40));

        <span class="d_comment">// 15 hours later must be in the next day
</span>        time<span class="hilite">.increment</span>(Duration(15 * 60));
        <span class="d_keyword">assert</span>(time == TimeOfDay(1, 40));

        <span class="d_comment">// 22 hours 20 minutes later must be midnight
</span>        time<span class="hilite">.increment</span>(Duration(22 * 60 + 20));
        <span class="d_keyword">assert</span>(time == TimeOfDay(0, 0));
    }
}
</pre>

<p><code class="d_inline">increment()</code> increments the value of the object by the specified amount of duration. In a later chapter we will see how the <i>operator overloading</i> feature of D will make it possible to add a duration by the <code class="d_inline">+=</code> operator syntax:
</p>

<pre class="d_code">    time += Duration(10);    <span class="d_comment">// to be explained in a later chapter
</span></pre>

<p>Also note that <code class="d_inline">unittest</code> blocks can be written inside <code class="d_inline">struct</code> definitions as well, mostly for testing member functions. It is still possible to move such <code class="d_inline">unittest</code> blocks outside of the body of the struct:
</p>

<pre class="d_code"><span class="d_keyword">struct</span> TimeOfDay {
    <span class="d_comment">// ... struct definition ...
</span>}

<span class="d_keyword">unittest</span> {
    <span class="d_comment">// ... struct tests ...
</span>}
</pre>

<h5 class="subsection">Problemler</h5>
    <ol>
<li>Add a <code class="d_inline">decrement()</code> member function to <code class="d_inline">TimeOfDay</code>, which should reduce the time by the specified amount of duration. Similar to <code class="d_inline">increment()</code>, it should <i>overflow</i> to the previous day when there is not enough time in the current day. For example, subtracting 10 minutes from 00:05 should result in 23:55.

<p>In other words, implement <code class="d_inline">decrement()</code> to pass the following unit tests:
</p>

<pre class="d_code"><span class="d_keyword">struct</span> TimeOfDay {
    <span class="d_comment">// ...
</span>
    <span class="d_keyword">void</span> decrement(Duration duration) {
        <span class="d_comment">// ... please implement this function ...
</span>    }

    <span class="d_keyword">unittest</span> {
        <span class="d_keyword">auto</span> time = TimeOfDay(10, 30);

        <span class="d_comment">// A trivial test
</span>        time.decrement(Duration(12));
        <span class="d_keyword">assert</span>(time == TimeOfDay(10, 18));

        <span class="d_comment">// 3 days and 11 hours earlier
</span>        time.decrement(Duration(3 * 24 * 60 + 11 * 60));
        <span class="d_keyword">assert</span>(time == TimeOfDay(23, 18));

        <span class="d_comment">// 23 hours and 18 minutes earlier must be midnight
</span>        time.decrement(Duration(23 * 60 + 18));
        <span class="d_keyword">assert</span>(time == TimeOfDay(0, 0));

        <span class="d_comment">// 1 minute earlier
</span>        time.decrement(Duration(1));
        <span class="d_keyword">assert</span>(time == TimeOfDay(23, 59));
    }
}
</pre>

</li>

<li>Convert <code class="d_inline">Meeting</code>, <code class="d_inline">Meal</code>, and <code class="d_inline">DailyPlan</code> overloads of <code class="d_inline">info()</code> to <code class="d_inline">toString()</code> member functions as well. (See <a href="function_overloading.cozum.html">the exercise solutions of the Function Overloading chapter</a> for their <code class="d_inline">info()</code> overloads.)

<p>You will notice that in addition to making their respective structs more convenient, the implementations of the <code class="d_inline">toString()</code> member functions will all consist of single lines.
</p>

</li>

</ol> <div class="cozum_link_cok"><p><a target="ddili_cozum" href="member_functions.cozum.html"><i>... çözümler</i></a></p></div>


        <div class="smallprint" id="copyright">Copyright &copy; 1999-2024 by the <a href="../foundation_overview.html">D Language Foundation</a> | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on Mon Jan 29 21:19:10 2024
</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
