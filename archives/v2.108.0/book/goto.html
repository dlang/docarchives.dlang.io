
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2024 by the D Language Foundation
    All Rights Reserved.
    https://dlang.org/foundation_overview.html
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>Labels and goto - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='Labels and goto' class='doc'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href="."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li><a href='../calendar.html'>Calendar</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.libera.chat/d'>IRC</a></li>
    <li><a href='https://discord.gg/bMZk9Q4'>Community Discord</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='https://github.com/dlang'>GitHub</a></li>
    <li><a href='../bugstats.html'>Issues</a></li>
    <li><a href='https://wiki.dlang.org/Get_involved'>Get involved</a></li>
    <li class="menu-divider"><a href='../foundation/contributors.html'>Contributors</a></li>
    <li><a href='../foundation/index.html'>Foundation</a></li>
    <li><a href='..//security.html'>Security Team</a></li>
    <li><a href='../foundation/donate.html'>Donate</a></li>
    <li><a href='../foundation/sponsors.html'>Sponsors</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://tour.dlang.org'>Tour</a></li>
    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='https://run.dlang.io'>run.dlang.io</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option  value="dlang.org/spec">Language</option>
                    <option  value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/&amp;component=dlang.org&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5BLabels and goto%5D&amp;version=D2&amp;bug_severity=enhancement">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/dlang.org/edit/master/d.en/goto.d">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1>Labels and goto</h1>
        
        



<p><a id="ix_Labels and goto.:, label" content=":, label"></a> Labels are names given to lines of code in order to direct program flow to those lines later on.
</p>

<p>A label consists of a name and the <code class="d_inline">:</code> character:
</p>

<pre class="d_code">end:   <span class="d_comment">// ‚Üê a label
</span></pre>

<p>That label gives the name <i>end</i> to the line that it is defined on.
</p>

<p><i><b>Note:</b> In reality, a label can appear between statements on the same line to name the exact spot that it appears at, but this is not a common practice:</i>
</p>

<pre class="d_code">    anExpression(); <span class="hilite">end:</span> anotherExpression();
</pre>

<h5 class="subsection"><code class="d_inline">goto</code></h5>

<p><code class="d_inline">goto</code> directs program flow to the specified label:
</p>

<pre class="d_code"><span class="d_keyword">void</span> foo(<span class="d_keyword">bool</span> condition) {
    writeln(<span class="d_string">"first"</span>);

    <span class="d_keyword">if</span> (condition) {
        <span class="hilite"><span class="d_keyword">goto</span></span> end;
    }

    writeln(<span class="d_string">"second"</span>);

end:

    writeln(<span class="d_string">"third"</span>);
}
</pre>

<p>When <code class="d_inline">condition</code> is <code class="d_inline">true</code>, the program flow <i>goes to</i> label <code class="d_inline">end</code>, effectively skipping the line that prints "second":
</p>

<pre class="shell">first
third
</pre>

<p><code class="d_inline">goto</code> works the same way as in the C and C++ programming languages. Being notorious for making it hard to understand the intent and flow of code, <code class="d_inline">goto</code> is discouraged even in those languages. Statements like <code class="d_inline">if</code>, <code class="d_inline">while</code>, <code class="d_inline">for</code> etc. should be used instead.
</p>

<p>For example, the previous code can be written without <code class="d_inline">goto</code> in a more <i>structured</i> way:
</p>

<pre class="d_code"><span class="d_keyword">void</span> foo(<span class="d_keyword">bool</span> condition) {
    writeln(<span class="d_string">"first"</span>);

    <span class="d_keyword">if</span> (!condition) {
        writeln(<span class="d_string">"second"</span>);
    }

    writeln(<span class="d_string">"third"</span>);
}
</pre>

<p>However, there are two acceptable uses of <code class="d_inline">goto</code> in C, none of which is necessary in D.
</p>

<h6>Finalization area</h6>

<p>One of the valid uses of <code class="d_inline">goto</code> in C is going to the finalization area where the cleanup operations of a function are performed (e.g. giving resources back, undoing certain operations, etc.):
</p>

<pre class="c_code">// --- C code ---

int foo() {
    // ...

    if (error) {
        goto finally;
    }

    // ...

finally:
    <span class="d_comment">// ... cleanup operations ...</span>

    return error;
}
</pre>

<p>This use of <code class="d_inline">goto</code> is not necessary in D because there are other ways of managing resources: the garbage collector, destructors, the <code class="d_inline">catch</code> and <code class="d_inline">finally</code> blocks, <code class="d_inline">scope()</code> statements, etc.
</p>

<p><i><b>Note:</b> This use of <code class="d_inline">goto</code> is not necessary in C++ either.</i>
</p>

<h6><code class="d_inline">continue</code> and <code class="d_inline">break</code> for outer loops</h6>

<p>The other valid use of <code class="d_inline">goto</code> in C is about outer loops.
</p>

<p>Since <code class="d_inline">continue</code> and <code class="d_inline">break</code> affect only the inner loop, one way of continuing or breaking out of the outer loop is by <code class="d_inline">goto</code> statements:
</p>

<pre class="c_code">// --- C code ---

    while (condition) {

        while (otherCondition) {

            <span class="d_comment">// affects the inner loop</span>
            continue;

            <span class="d_comment">// affects the inner loop</span>
            break;

            <span class="d_comment">// works like 'continue' for the outer loop</span>
            goto continueOuter;

            <span class="d_comment">// works like 'break' for the outer loop</span>
            goto breakOuter;
        }

    continueOuter:
        ;
    }
breakOuter:
</pre>

<p>The same technique can be used for outer <code class="d_inline">switch</code> statements as well.
</p>

<p>This use of <code class="d_inline">goto</code> is not needed in D because D has loop labels, which we will see below.
</p>

<p><i><b>Note:</b> This use of <code class="d_inline">goto</code> can be encountered in C++ as well.</i>
</p>

<h6>The problem of skipping constructors</h6>

<p>The constructor is called on an object exactly where that object is defined. This is mainly because the information that is needed to construct an object is usually not available until that point. Also, there is no need to construct an object if that object is not going to be used in the program at all.
</p>

<p>When <code class="d_inline">goto</code> skips a line that an object is constructed on, the program can be using an object that has not been prepared yet:
</p>

<pre class="d_code">    <span class="d_keyword">if</span> (condition) {
        <span class="d_keyword">goto</span> aLabel;    <span class="d_comment">// skips the constructor
</span>    }

    <span class="d_keyword">auto</span> s = S(42);     <span class="d_comment">// constructs the object properly
</span>
aLabel:

    s.bar();            <span class="d_comment">// BUG: 's' may not be ready for use
</span></pre>

<p>The compiler prevents this bug:
</p>

<pre class="shell">Error: goto skips declaration of variable deneme.main.s
</pre>

<h5 class="subsection"><a id="ix_Labels and goto.loop label" content="loop label"></a> Loop labels</h5>

<p>Loops can have labels and <code class="d_inline">goto</code> statements can refer to those labels:
</p>

<pre class="d_code"><span class="hilite">outerLoop:</span>
    <span class="d_keyword">while</span> (condition) {

        <span class="d_keyword">while</span> (otherCondition) {

            <span class="d_comment">// affects the inner loop
</span>            <span class="d_keyword">continue</span>;

            <span class="d_comment">// affects the inner loop
</span>            <span class="d_keyword">break</span>;

            <span class="d_comment">// continues the outer loop
</span>            <span class="d_keyword">continue</span> <span class="hilite">outerLoop</span>;

            <span class="d_comment">// breaks the outer loop
</span>            <span class="d_keyword">break</span> <span class="hilite">outerLoop</span>;
        }
    }
</pre>

<p><code class="d_inline">switch</code> statements can have labels as well. An inner <code class="d_inline">break</code> statement can refer to an outer <code class="d_inline">switch</code> to break out of the outer <code class="d_inline">switch</code> statement.
</p>

<h5 class="subsection"><code class="d_inline">goto</code> in <code class="d_inline">case</code> sections</h5>

<p>We have already seen the use of <code class="d_inline">goto</code> in <code class="d_inline">case</code> sections in <a href="switch_case.html">the <code class="d_inline">switch</code> and <code class="d_inline">case</code> chapter</a>:
</p>

<ul>
<li><a id="ix_Labels and goto.goto case" content="goto case"></a> <a id="ix_Labels and goto.case, goto" content="case, goto"></a> <code class="d_inline">goto case</code> causes the execution to continue to the next <code class="d_inline">case</code>.</li>

<li><a id="ix_Labels and goto.goto default" content="goto default"></a> <a id="ix_Labels and goto.default, goto" content="default, goto"></a> <code class="d_inline">goto default</code> causes the execution to continue to the <code class="d_inline">default</code> section.</li>

<li><code class="d_inline">goto case <i>expression</i></code> causes the execution to continue to the <code class="d_inline">case</code> that matches that expression.</li>

</ul>

<h5 class="subsection">Summary</h5>

<ul>
<li>Some of the uses of <code class="d_inline">goto</code> are not necessary in D.
</li>

<li><code class="d_inline">break</code> and <code class="d_inline">continue</code> can specify labels to affect outer loops and <code class="d_inline">switch</code> statements.
</li>

<li><code class="d_inline">goto</code> inside <code class="d_inline">case</code> sections can make the program flow jump to other <code class="d_inline">case</code> and <code class="d_inline">default</code> sections.
</li>

</ul>


        <div class="smallprint" id="copyright">Copyright &copy; 1999-2024 by the <a href="../foundation_overview.html">D Language Foundation</a> | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on Mon Apr  1 20:41:01 2024
</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
