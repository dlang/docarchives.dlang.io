
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2022 by the D Language Foundation
    All Rights Reserved.
    https://dlang.org/foundation_overview.html
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>Associative Arrays - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='Associative Arrays' class='doc'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href="."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li><a href='../calendar.html'>Calendar</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.libera.chat/d'>IRC</a></li>
    <li><a href='https://discord.gg/bMZk9Q4'>Community Discord</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='https://github.com/dlang'>GitHub</a></li>
    <li><a href='../bugstats.html'>Issues</a></li>
    <li><a href='https://wiki.dlang.org/Get_involved'>Get involved</a></li>
    <li class="menu-divider"><a href='../foundation/contributors.html'>Contributors</a></li>
    <li><a href='../foundation/index.html'>Foundation</a></li>
    <li><a href='..//security.html'>Security Team</a></li>
    <li><a href='../foundation/donate.html'>Donate</a></li>
    <li><a href='../foundation/sponsors.html'>Sponsors</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://tour.dlang.org'>Tour</a></li>
    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='https://run.dlang.io'>run.dlang.io</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option  value="dlang.org/spec">Language</option>
                    <option  value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/&amp;component=dlang.org&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5BAssociative Arrays%5D&amp;version=D2&amp;bug_severity=enhancement">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/dlang.org/edit/master/d.en/aa.d">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1>Associative Arrays</h1>
        
        



<p>Associative arrays are a feature that is found in most modern high-level languages. They are very fast data structures that work like mini databases and are used in many programs.
</p>

<p>We saw in the <a href="arrays.html">Arrays chapter</a> that plain arrays are containers that store their elements side-by-side and provide access to them by index. An array that stores the names of the days of the week can be defined like this:
</p>

<pre class="d_code">    string[] dayNames =
        [ <span class="d_string">"Monday"</span>, <span class="d_string">"Tuesday"</span>, <span class="d_string">"Wednesday"</span>, <span class="d_string">"Thursday"</span>,
          <span class="d_string">"Friday"</span>, <span class="d_string">"Saturday"</span>, <span class="d_string">"Sunday"</span> ];
</pre>

<p>The name of a specific day can be accessed by its index in that array:
</p>

<pre class="d_code">    writeln(dayNames[1]);   <span class="d_comment">// prints "Tuesday"
</span></pre>

<p>The fact that plain arrays provide access to their values through index numbers can be described as an <i>association</i> of indexes with values. In other words, arrays map indexes to values. Plain arrays can use only integers as indexes.
</p>

<p>Associative arrays allow indexing not only using integers but also using any other type. They map the values of one type to the values of another type. The values of the type that associative arrays <i>map from</i> are called <i>keys</i>, rather than indexes. Associative arrays store their elements as key-value pairs.
</p>

<p>Associative arrays are implemented in D using a <i>hash table</i>. Hash tables are among the fastest collections for storing and accessing elements. Other than in rare pathological cases, the time it takes to store or access an element is independent of the number of elements that are in the associative array.
</p>

<p>The high performance of hash tables comes at the expense of storing the elements in an unordered way. Also, unlike arrays, the elements of hash tables are not stored side-by-side.
</p>

<p>For plain arrays, index values are not stored at all. Because array elements are stored side-by-side in memory, index values are implicitly the relative positions of elements from the beginning of the array.
</p>

<p>On the other hand, associative arrays do store both the keys and the values of elements. Although this difference makes associative arrays use more memory, it also allows them to use <i>sparse</i> key values. For example, when there are just two elements to store for keys 0 and 999, an associative array stores just two elements, not 1000 as a plain array has to.
</p>

<h5 class="subsection">Definition</h5>

<p>The syntax of associative arrays is similar to the array syntax. The difference is that it is the type of the key that is specified within the square brackets, not the length of the array:
</p>

<pre class="d_code">    <i>value_type</i>[<i>key_type</i>] <i>associative_array_name</i>;
</pre>

<p>For example, an associative array that maps day names of type <code class="d_inline">string</code> to day numbers of type <code class="d_inline">int</code> can be defined like this:
</p>

<pre class="d_code">    <span class="d_keyword">int</span>[string] dayNumbers;
</pre>

<p>The <code class="d_inline">dayNumbers</code> variable above is an associative array that can be used as a table that provides a mapping from day names to day numbers. In other words, it can be used as the opposite of the <code class="d_inline">dayNames</code> array at the beginning of this chapter. We will use the <code class="d_inline">dayNumbers</code> associative array in the examples below.
</p>

<p>The keys of associative arrays can be of any type, including user-defined <code class="d_inline">struct</code> and <code class="d_inline">class</code> types. We will see user-defined types in later chapters.
</p>

<p>The length of associative arrays cannot be specified when defined. They grow automatically as key-value pairs are added.
</p>

<p><i><b>Note:</b> An associative array that is defined without any element is <a href="null_is.html"><code class="d_inline">null</code></a>, not empty. This distinction has an important consequence when  <a href="function_parameters.html">passing associative arrays to functions</a>. We will cover these concepts in later chapters.</i>
</p>

<h5 class="subsection">Adding key-value pairs</h5>

<p>Using the assignment operator is sufficient to build the association between a key and a value:
</p>

<pre class="d_code">    <span class="d_comment">// associates value 0 with key "Monday"
</span>    dayNumbers[<span class="d_string">"Monday"</span>] <span class="hilite">=</span> 0;

    <span class="d_comment">// associates value 1 with key "Tuesday"
</span>    dayNumbers[<span class="d_string">"Tuesday"</span>] <span class="hilite">=</span> 1;
</pre>

<p>The table grows automatically with each association. For example, <code class="d_inline">dayNumbers</code> would have two key-value pairs after the operations above. This can be demonstrated by printing the entire table:
</p>

<pre class="d_code">    writeln(dayNumbers);
</pre>

<p>The output indicates that the values 0 and 1 correspond to keys "Monday" and "Tuesday", respectively:
</p>

<pre class="shell">["Monday":0, "Tuesday":1]
</pre>

<p>There can be only one value per key. For that reason, when we assign a new key-value pair and the key already exists, the table does not grow; instead, the value of the existing key changes:
</p>

<pre class="d_code">    dayNumbers[<span class="d_string">"Tuesday"</span>] = 222;
    writeln(dayNumbers);
</pre>

<p>The output:
</p>

<pre class="shell">["Monday":0, "Tuesday":222]
</pre>


<h5 class="subsection">Initialization</h5>

<p><a id="ix_Associative Arrays.:, associative array" content=":, associative array"></a> Sometimes some of the mappings between the keys and the values are already known at the time of the definition of the associative array. Associative arrays are initialized similarly to regular arrays, using a colon to separate each key from its respective value:
</p>

<pre class="d_code">    <span class="d_comment">// key : value
</span>    <span class="d_keyword">int</span>[string] dayNumbers =
        [ <span class="d_string">"Monday"</span>   : 0, <span class="d_string">"Tuesday"</span> : 1, <span class="d_string">"Wednesday"</span> : 2,
          <span class="d_string">"Thursday"</span> : 3, <span class="d_string">"Friday"</span>  : 4, <span class="d_string">"Saturday"</span>  : 5,
          <span class="d_string">"Sunday"</span>   : 6 ];

    writeln(dayNumbers[<span class="d_string">"Tuesday"</span>]);    <span class="d_comment">// prints 1
</span></pre>

<h5 class="subsection">Removing key-value pairs</h5>

<p>Key-value pairs can be removed by using <code class="d_inline">.remove()</code>:
</p>

<pre class="d_code">    dayNumbers.remove(<span class="d_string">"Tuesday"</span>);
    writeln(dayNumbers[<span class="d_string">"Tuesday"</span>]);    <span class="d_comment">// ← run-time ERROR
</span></pre>

<p>The first line above removes the key-value pair "Tuesday" / <code class="d_inline">1</code>. Since that key is not in the container anymore, the second line would cause an exception to be thrown and the program to be terminated if that exception is not caught. We will see exceptions in <a href="exceptions.html">a later chapter</a>.
</p>

<p><code class="d_inline">.clear</code> removes all elements:
</p>

<pre class="d_code">    dayNumbers.clear;    <span class="d_comment">// The associative array becomes empty
</span></pre>

<h5 class="subsection"><a id="ix_Associative Arrays.in, associative array" content="in, associative array"></a> Determining the presence of a key</h5>

<p>The <code class="d_inline">in</code> operator determines whether a given key exists in the associative array:
</p>

<pre class="d_code">    <span class="d_keyword">int</span>[string] colorCodes = [ <span class="d_comment">/* ... */</span> ];

    <span class="d_keyword">if</span> (<span class="d_string">"purple"</span> <span class="hilite"><span class="d_keyword">in</span></span> colorCodes) {
        <span class="d_comment">// key "purple" exists in the table
</span>
    } <span class="d_keyword">else</span> {
        <span class="d_comment">// key "purple" does not exist in the table
</span>    }
</pre>

<p>Sometimes it makes sense to use a default value if a key does not exist in the associative array. For example, the special value of -1 can be used as the code for colors that are not in <code class="d_inline">colorCodes</code>. <code class="d_inline">.get()</code> is useful in such cases: it returns the value associated with the specified key if that key exists, otherwise it returns the default value. The default value is specified as the second parameter of <code class="d_inline">.get()</code>:
</p>

<pre class="d_code">    <span class="d_keyword">int</span>[string] colorCodes = [ <span class="d_string">"blue"</span> : 10, <span class="d_string">"green"</span> : 20 ];
    writeln(colorCodes.get(<span class="d_string">"purple"</span>, <span class="hilite">-1</span>));
</pre>

<p>Since the array does not contain a value for the key <code class="d_inline"><span class="d_string">"purple"</span></code>, <code class="d_inline">.get()</code> returns -1:
</p>

<pre class="shell">-1
</pre>

<h5 class="subsection">Properties</h5>

<ul>
<li><a id="ix_Associative Arrays..length" content=".length"></a> <code class="d_inline">.length</code> returns the number of key-value pairs.</li>

<li><a id="ix_Associative Arrays..keys" content=".keys"></a> <code class="d_inline">.keys</code> returns a copy of all keys as a dynamic array.</li>

<li><a id="ix_Associative Arrays..byKey" content=".byKey"></a> <code class="d_inline">.byKey</code> provides access to the keys without copying them; we will see how <code class="d_inline">.byKey</code> is used in <code class="d_inline">foreach</code> loops in the next chapter.</li>

<li><a id="ix_Associative Arrays..values" content=".values"></a> <code class="d_inline">.values</code> returns a copy of all values as a dynamic array.</li>

<li><a id="ix_Associative Arrays..byValue" content=".byValue"></a> <code class="d_inline">.byValue</code> provides access to the values without copying them.</li>

<li><a id="ix_Associative Arrays..byKeyValue" content=".byKeyValue"></a> <code class="d_inline">.byKeyValue</code> provides access to the key-value pairs without copying them.</li>

<li><a id="ix_Associative Arrays..rehash" content=".rehash"></a> <code class="d_inline">.rehash</code> may make the array more efficient in some cases, such as after inserting a large number of key-value pairs.</li>

<li><a id="ix_Associative Arrays..sizeof, associative array" content=".sizeof, associative array"></a> <code class="d_inline">.sizeof</code> is the size of the array <i>reference</i> (it has nothing to do with the number of key-value pairs in the table and is the same value for all associative arrays).</li>

<li><a id="ix_Associative Arrays..get" content=".get"></a> <code class="d_inline">.get</code> returns the value if it exists, the default value otherwise.</li>

<li><a id="ix_Associative Arrays..remove, associative array" content=".remove, associative array"></a> <code class="d_inline">.remove</code> removes the specified key and its value from the array.</li>

<li><a id="ix_Associative Arrays..clear" content=".clear"></a> <code class="d_inline">.clear</code> removes all elements.</li>

</ul>

<h5 class="subsection">Example</h5>

<p>Here is a program that prints the Turkish names of colors that are specified in English:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;
<span class="d_keyword">import</span> std.string;

<span class="d_keyword">void</span> main() {
    string[string] colors = [ <span class="d_string">"black"</span> : <span class="d_string">"siyah"</span>,
                              <span class="d_string">"white"</span> : <span class="d_string">"beyaz"</span>,
                              <span class="d_string">"red"</span>   : <span class="d_string">"kırmızı"</span>,
                              <span class="d_string">"green"</span> : <span class="d_string">"yeşil"</span>,
                              <span class="d_string">"blue"</span>  : <span class="d_string">"mavi"</span> ];

    writefln(<span class="d_string">"I know the Turkish names of these %s colors: %s"</span>,
             colors.length, colors.keys);

    write(<span class="d_string">"Please ask me one: "</span>);
    string inEnglish = strip(readln());

    <span class="d_keyword">if</span> (inEnglish <span class="d_keyword">in</span> colors) {
        writefln(<span class="d_string">"\"%s\" is \"%s\" in Turkish."</span>,
                 inEnglish, colors[inEnglish]);

    } <span class="d_keyword">else</span> {
        writeln(<span class="d_string">"I don't know that one."</span>);
    }
}
</pre>

<h5 class="subsection">Problemler</h5>
    <ol>
<li>How can all of the key-value pairs of an associative array be removed other than calling <code class="d_inline">.clear</code>? (<code class="d_inline">.clear</code> is the most natural method.) There are at least three methods:

<ul>
<li>Removing them one-by-one from the associative array.</li>

<li>Assigning an empty associative array.</li>

<li>Similar to the previous method, assigning the array's <code class="d_inline">.init</code> property.

<p><a id="ix_Associative Arrays..init, clearing a variable" content=".init, clearing a variable"></a> <i><b>Note:</b> The <code class="d_inline">.init</code> property of any variable or type is the initial value of that type:</i>
</p>

<pre class="d_code">    number = <span class="d_keyword">int</span>.init;    <span class="d_comment">// 0 for int
</span></pre>
</li>

</ul>

</li>

<li>Just like with arrays, there can be only one value for each key. This may be seen as a limitation for some applications.

<p>Assume that an associative array is used for storing student grades. For example, let's assume that the grades 90, 85, 95, etc. are to be stored for the student named "emre".
</p>

<p>Associative arrays make it easy to access the grades by the name of the student as in <code class="d_inline">grades["emre"]</code>. However, the grades cannot be inserted as in the following code because each grade would overwrite the previous one:
</p>

<pre class="d_code">    <span class="d_keyword">int</span>[string] grades;
    grades[<span class="d_string">"emre"</span>] = 90;
    grades[<span class="d_string">"emre"</span>] = 85;   <span class="d_comment">// ← Overwrites the previous grade!
</span></pre>

<p>How can you solve this problem? Define an associative array that can store multiple grades per student.
</p>

</li>

</ol> <div class="cozum_link_cok"><p><a target="ddili_cozum" href="aa.cozum.html"><i>... çözümler</i></a></p></div>


        <div class="smallprint" id="copyright">Copyright &copy; 1999-2022 by the <a href="../foundation_overview.html">D Language Foundation</a> | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on Sun May 15 14:08:34 2022
</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
