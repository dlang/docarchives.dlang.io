
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2024 by the D Language Foundation
    All Rights Reserved.
    https://dlang.org/foundation_overview.html
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>Functions - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='Functions' class='doc'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href="."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li><a href='../calendar.html'>Calendar</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.libera.chat/d'>IRC</a></li>
    <li><a href='https://discord.gg/bMZk9Q4'>Community Discord</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='https://github.com/dlang'>GitHub</a></li>
    <li><a href='../bugstats.html'>Issues</a></li>
    <li><a href='https://wiki.dlang.org/Get_involved'>Get involved</a></li>
    <li class="menu-divider"><a href='../foundation/contributors.html'>Contributors</a></li>
    <li><a href='../foundation/index.html'>Foundation</a></li>
    <li><a href='..//security.html'>Security Team</a></li>
    <li><a href='../foundation/donate.html'>Donate</a></li>
    <li><a href='../foundation/sponsors.html'>Sponsors</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://tour.dlang.org'>Tour</a></li>
    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='https://run.dlang.io'>run.dlang.io</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option  value="dlang.org/spec">Language</option>
                    <option  value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/&amp;component=dlang.org&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5BFunctions%5D&amp;version=D2&amp;bug_severity=enhancement">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/dlang.org/edit/master/d.en/functions.d">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1>Functions</h1>
        
        



<p>Similarly to how fundamental types are building blocks of program data, functions are building blocks of program behavior.
</p>

<p>Functions are also closely related to the craft aspect of programming. The functions that are written by experienced programmers are succinct, simple, and clear. This goes both ways: The mere act of trying to identify and write smaller building blocks of a program makes for a better programmer.
</p>

<p>We have covered basic statements and expressions in previous chapters. Although there will be many more that we will see in later chapters, what we have seen so far are commonly-used features of D. Still, they are not sufficient on their own to write large programs. The programs that we have written so far have all been very short, each demonstrating just a simple feature of the language. Trying to write a program with any level of complexity without functions would be very difficult and prone to bugs.
</p>

<p>This chapter covers only the basic features of functions. We will see more about functions later in the following chapters:
</p>

<ul><li><a href="function_parameters.html">Function Parameters</a></li>
<li><a href="function_overloading.html">Function Overloading</a></li>
<li><a href="lambda.html">Function Pointers, Delegates, and Lambdas</a></li>
<li><a href="functions_more.html">More Functions</a></li>
</ul>

<p>Functions are features that put statements and expressions together as units of program execution. Such statements and expressions altogether are given a name that describes what they collectively achieve. They can then be <i>called</i> (or <i>executed</i>) by using that name.
</p>

<p>The concept of <i>giving names to a group of steps</i> is common in our daily lives. For example, the act of cooking an omelet can be described in some level of detail by the following steps:
</p>

<ul><li>get a pan</li>
<li>get butter</li>
<li>get an egg</li>
<li>turn on the stove</li>
<li>put the pan on the fire</li>
<li>put butter into the pan when it is hot</li>
<li>put the egg into butter when it is melted</li>
<li>remove the pan from the fire when the egg is cooked</li>
<li>turn off the stove</li>
</ul>

<p>Since that much detail is obviously excessive, steps that are related together would be combined under a single name:
</p>

<ul><li><span class="hilite">make preparations</span> (get the pan, butter, and the egg)</li>
<li>turn on the stove</li>
<li><span class="hilite">cook the egg</span> (put the pan on the fire, etc.)</li>
<li>turn off the stove</li>
</ul>

<p>Going further, there can be a single name for all of the steps:
</p>

<ul><li><span class="hilite">make a one-egg omelet</span> (all of the steps)</li>
</ul>

<p>Functions are based on the same concept: steps that can collectively be named as a whole are put together to form a function. As an example, let's start with the following lines of code that achieve the task of printing a menu:
</p>

<pre class="d_code">    writeln(<span class="d_string">" 0 Exit"</span>);
    writeln(<span class="d_string">" 1 Add"</span>);
    writeln(<span class="d_string">" 2 Subtract"</span>);
    writeln(<span class="d_string">" 3 Multiply"</span>);
    writeln(<span class="d_string">" 4 Divide"</span>);
</pre>

<p>Since it would make sense to name those combined lines as <code class="d_inline">printMenu</code>, they can be put together to form a function by using the following syntax:
</p>

<pre class="d_code"><span class="d_keyword">void</span> printMenu() {
    writeln(<span class="d_string">" 0 Exit"</span>);
    writeln(<span class="d_string">" 1 Add"</span>);
    writeln(<span class="d_string">" 2 Subtract"</span>);
    writeln(<span class="d_string">" 3 Multiply"</span>);
    writeln(<span class="d_string">" 4 Divide"</span>);
}
</pre>

<p>The contents of that function can now be executed from within <code class="d_inline">main()</code> simply by using its name:
</p>

<pre class="d_code"><span class="d_keyword">void</span> main() {
    printMenu();

    <span class="d_comment">// ...
</span>}
</pre>

<p>It may be obvious from the similarities of the definitions of <code class="d_inline">printMenu()</code> and <code class="d_inline">main()</code> that <code class="d_inline">main()</code> is a function as well. The execution of a D program starts with the function named <code class="d_inline">main()</code> and branches out to other functions from there.
</p>

<h5 class="subsection"><a id="ix_Functions.parameter" content="parameter"></a> Parameters</h5>

<p>Some of the powers of functions come from the fact that their behaviors are adjustable through parameters.
</p>

<p>Let's continue with the omelet example by modifying it to make an omelet of five eggs instead of always one. The steps would exactly be the same, the only difference being the number of eggs to use. We can change the more general description above accordingly:
</p>

<ul><li>make preparations (get the pan, butter, and <span class="hilite">five eggs</span>)</li>
<li>turn on the stove</li>
<li>cook <span class="hilite">the eggs</span> (put the pan on the fire, etc.)</li>
<li>turn off the stove</li>
</ul>

<p>Likewise, the most general single step would become the following:
</p>

<ul><li>make a <span class="hilite">five-egg</span> omelet (all of the steps)</li>
</ul>

<p>This time there is an additional information that concerns some of the steps: "get five eggs", "cook the eggs", and "make a five-egg omelet".
</p>

<p><a id="ix_Functions., (comma), function parameter list" content=", (comma), function parameter list"></a> The behaviors of functions can be adjusted similarly to the omelet example. The information that functions use to adjust their behavior are called <i>parameters</i>. Parameters are specified in a comma separated <i>function parameter list</i>. The parameter list rests inside of the parentheses that comes after the name of the function.
</p>

<p>The <code class="d_inline">printMenu()</code> function above was defined with an empty parameter list because that function always printed the same menu. Let's assume that sometimes the menu will need to be printed differently in different contexts. For example, it may make more sense to print the first entry as "Return" instead of "Exit" depending on the part of the program that is being executed at that time.
</p>

<p>In such a case, the first entry of the menu can be <i>parameterized</i> by having been defined in the parameter list. The function then uses the value of that parameter instead of the literal <code class="d_inline"><span class="d_string">"Exit"</span></code>:
</p>

<pre class="d_code"><span class="d_keyword">void</span> printMenu(<span class="hilite">string firstEntry</span>) {
    writeln(<span class="d_string">" 0 "</span>, firstEntry);
    writeln(<span class="d_string">" 1 Add"</span>);
    writeln(<span class="d_string">" 2 Subtract"</span>);
    writeln(<span class="d_string">" 3 Multiply"</span>);
    writeln(<span class="d_string">" 4 Divide"</span>);
}
</pre>

<p>Notice that since the information that the <code class="d_inline">firstEntry</code> parameter conveys is a piece of text, its type has been specified as <code class="d_inline">string</code> in the parameter list. This function can now be <i>called</i> with different parameter values to print menus having different first entries. All that needs to be done is to use the appropriate <code class="d_inline">string</code> values depending on where the function is being called from:
</p>

<pre class="d_code">    <span class="d_comment">// At some place in the program:
</span>    printMenu(<span class="d_string">"Exit"</span>);
    <span class="d_comment">// ...
</span>    <span class="d_comment">// At some other place in the program:
</span>    printMenu(<span class="d_string">"Return"</span>);
</pre>

<p><b>Note:</b> When you write and use your own functions with parameters of type <code class="d_inline">string</code> you may encounter compilation errors. As written, <code class="d_inline">printMenu()</code> above cannot be called with parameter values of type <code class="d_inline">char[]</code>. For example, the following code would cause a compilation error:
</p>

<pre class="d_code">    <span class="d_keyword">char</span>[] anEntry;
    anEntry ~= <span class="d_string">"Take square root"</span>;
    printMenu(anEntry);  <span class="d_comment">// ← <span class="d_hata">derleme HATASI</span></span>
</pre>

<p>On the other hand, if <code class="d_inline">printMenu()</code> were defined to take its parameter as <code class="d_inline">char[]</code>, then it could not be called with <code class="d_inline">string</code>s like <code class="d_inline"><span class="d_string">"Exit"</span></code>. This is related to the concept of immutability and the <code class="d_inline">immutable</code> keyword, both of which will be covered in the next chapter.
</p>

<p>Let's continue with the menu function and assume that it is not appropriate to always start the menu selection numbers with zero. In that case the starting number can also be passed to the function as its second parameter. The parameters of the function must be separated by commas:
</p>

<pre class="d_code"><span class="d_keyword">void</span> printMenu(string firstEntry<span class="hilite">, <span class="d_keyword">int</span> firstNumber</span>) {
    writeln(' ', firstNumber + 0, ' ', firstEntry);
    writeln(' ', firstNumber + 1, <span class="d_string">" Add"</span>);
    writeln(' ', firstNumber + 2, <span class="d_string">" Subtract"</span>);
    writeln(' ', firstNumber + 3, <span class="d_string">" Multiply"</span>);
    writeln(' ', firstNumber + 4, <span class="d_string">" Divide"</span>);
}
</pre>

<p>It is now possible to tell the function what number to start from:
</p>

<pre class="d_code">    printMenu(<span class="d_string">"Return"</span><span class="hilite">, 1</span>);
</pre>

<h5 class="subsection">Calling a function</h5>

<p>Starting a function so that it achieves its task is called <i>calling a function</i>. The function call syntax is the following:
</p>

<pre class="d_code">    <i>function_name</i>(<i>parameter_values</i>)
</pre>


<p><a id="ix_Functions.argument" content="argument"></a> The actual parameter values that are passed to functions are called <i>function arguments</i>. Although the terms <i>parameter</i> and <i>argument</i> are sometimes used interchangeably in the literature, they signify different concepts.
</p>

<p>The arguments are matched to the parameters one by one in the order that the parameters are defined. For example, the last call of <code class="d_inline">printMenu()</code> above uses the <i>arguments</i> <code class="d_inline"><span class="d_string">"Return"</span></code> and <code class="d_inline">1</code>, which correspond to the <i>parameters</i> <code class="d_inline">firstEntry</code> and <code class="d_inline">firstNumber</code>, respectively.
</p>

<p>The type of each argument must match the type of the corresponding parameter.
</p>

<h5 class="subsection">Doing work</h5>

<p>In previous chapters, we have defined expressions as entities that do work. Function calls are expressions as well: they do some work. Doing work means producing a value or having a side effect:
</p>

<ul>
<li><b>Producing a value</b>: Some operations only produce values. For example, a function that adds numbers would be producing the result of that addition. As another example, a function that makes a <code class="d_inline">Student</code> object by using the student's name and address would be producing a <code class="d_inline">Student</code> object.
</li>

<li><a id="ix_Functions.side effect" content="side effect"></a>
<b>Having side effects</b>: Side effects are any change in the state of the program or its environment. Some operations have only side effects. An example is how the <code class="d_inline">printMenu()</code> function above changes <code class="d_inline">stdout</code> by printing to it. As another example, a function that adds a <code class="d_inline">Student</code> object to a student container would also have a side effect: it would be causing the container to grow.

<p>In summary, operations that cause a change in the state of the program have side effects.
</p>

</li>

<li><b>Having side effects and producing a value:</b> Some operations do both. For example, a function that reads two values from <code class="d_inline">stdin</code> and returns their sum would be having side effects due to changing the state of <code class="d_inline">stdin</code> and also producing the sum of the two values.
</li>

<li><b>No operation:</b> Although every function is designed as one of the three categories above, depending on certain conditions at compile time or at run time, some functions end up doing no work at all.
</li>

</ul>

<h5 class="subsection"><a id="ix_Functions.return value" content="return value"></a> The return value</h5>

<p>The value that a function produces as a result of its work is called its <i>return value</i>. This term comes from the observation that once the program execution branches into a function, it eventually <i>returns</i> back to where the function has been called. Functions get <i>called</i> and they <i>return</i> values.
</p>

<p>Just like any other value, return values have types. The type of the return value is specified right before the name of the function, at the point where the function is defined. For example, a function that adds two values of type <code class="d_inline">int</code> and returns their sum also as an <code class="d_inline">int</code> would be defined as follows:
</p>

<pre class="d_code"><span class="hilite"><span class="d_keyword">int</span></span> add(<span class="d_keyword">int</span> first, <span class="d_keyword">int</span> second) {
    <span class="d_comment">// ...  the actual work of the function ...
</span>}
</pre>

<p>The value that a function returns takes the place of the function call itself. For example, assuming that the function call <code class="d_inline">add(5, 7)</code> produces the value <code class="d_inline">12</code>, then the following two lines would be equivalent:
</p>

<pre class="d_code">    writeln(<span class="d_string">"Result: "</span>, add(5, 7));
    writeln(<span class="d_string">"Result: "</span>, 12);
</pre>

<p>In the first line above, the <code class="d_inline">add()</code> function is called with the arguments <code class="d_inline">5</code> and <code class="d_inline">7</code> <i>before</i> <code class="d_inline">writeln()</code> gets called. The value <code class="d_inline">12</code> that the function returns is in turn passed to <code class="d_inline">writeln()</code> as its second argument.
</p>

<p>This allows passing the return values of functions to other functions to form complex expressions:
</p>

<pre class="d_code">    writeln(<span class="d_string">"Result: "</span>, add(5, divide(100, studentCount())));
</pre>

<p>In the line above, the return value of <code class="d_inline">studentCount()</code> is passed to <code class="d_inline">divide()</code> as its second argument, the return value of <code class="d_inline">divide()</code> is passed to <code class="d_inline">add()</code> as its second argument, and eventually the return value of <code class="d_inline">add()</code> is passed to <code class="d_inline">writeln()</code> as its second argument.
</p>

<h5 class="subsection"><a id="ix_Functions.return, statement" content="return, statement"></a> The <code class="d_inline">return</code> statement</h5>

<p>The return value of a function is specified by the <code class="d_inline">return</code> keyword:
</p>

<pre class="d_code"><span class="d_keyword">int</span> add(<span class="d_keyword">int</span> first, <span class="d_keyword">int</span> second) {
    <span class="d_keyword">int</span> result = first + second;
    <span class="hilite"><span class="d_keyword">return</span></span> result;
}
</pre>

<p>A function produces its return value by taking advantage of statements, expressions, and potentially by calling other functions. The function would then return that value by the <code class="d_inline">return</code> keyword, at which point the execution of the function ends.
</p>

<p>It is possible to have more than one <code class="d_inline">return</code> statement in a function. The value of the first <code class="d_inline">return</code> statement that gets executed determines the return value of the function for a particular call:
</p>

<pre class="d_code"><span class="d_keyword">int</span> complexCalculation(<span class="d_keyword">int</span> aParameter, <span class="d_keyword">int</span> anotherParameter) {
    <span class="d_keyword">if</span> (aParameter == anotherParameter) {
        <span class="d_keyword">return</span> 0;
    }

    <span class="d_keyword">return</span> aParameter * anotherParameter;
}
</pre>

<p>The function above returns <code class="d_inline">0</code> when the two parameters are equal, and the product of their values when they are different.
</p>

<h5 class="subsection"><a id="ix_Functions.void, function" content="void, function"></a> <code class="d_inline">void</code> functions</h5>

<p>The return types of functions that do not produce values are specified as <code class="d_inline">void</code>. We have seen this many times with the <code class="d_inline">main()</code> function so far, as well as the <code class="d_inline">printMenu()</code> function above. Since they do not return any value to the caller, their return types have been defined as <code class="d_inline">void</code>. (<i><b>Note:</b> <code class="d_inline">main()</code> can also be defined as returning <code class="d_inline">int</code>. We will see this in <a href="main.html">a later chapter</a>.</i>)
</p>

<h5 class="subsection">The name of the function</h5>

<p>The name of a function must be chosen to communicate the purpose of the function clearly. For example, the names <code class="d_inline">add</code> and <code class="d_inline">printMenu</code> were appropriate because their purposes were to add two values, and to print a menu, respectively.
</p>

<p>A common guideline for function names is that they contain a verb like <i>add</i> or <i>print</i>. According to this guideline names like <code class="d_inline">addition()</code> and <code class="d_inline">menu()</code> would be less than ideal.
</p>

<p>However, it is acceptable to name functions simply as nouns if those functions do not have any side effects. For example, a function that returns the current temperature can be named as <code class="d_inline">currentTemperature()</code> instead of <code class="d_inline">getCurrentTemperature()</code>.
</p>

<p>Coming up with names that are clear, short, and consistent is part of the subtle art of programming.
</p>

<h5 class="subsection">Code quality through functions</h5>

<p>Functions can improve the quality of code. Smaller functions with fewer responsibilities lead to programs that are easier to maintain.
</p>

<h6><a id="ix_Functions.code duplication" content="code duplication"></a> Code duplication is harmful</h6>

<p>One of the aspects that is highly detrimental to program quality is code duplication. Code duplication occurs when there is more than one piece of code in the program that performs the same task.
</p>

<p>Although this sometimes happens by copying lines of code around, it may also happen incidentally when writing separate pieces of code.
</p>

<p>One of the problems with pieces of code that duplicate essentially the same functionality is that they present multiple chances for bugs to crop up. When such bugs do occur and we need to fix them, it can be hard to make sure that we have fixed all places where we introduced the problem, as they may be spread around. Conversely, when the code appears in only one place in the program, then we only need to fix it at that one place to get rid of the bug once and for all.
</p>

<p>As I mentioned above, functions are closely related to the craft aspect of programming. Experienced programmers are always on the lookout for code duplication. They continually try to identify commonalities in code and move common pieces of code to separate functions (or to common structs, classes, templates, etc., as we will see in later chapters).
</p>

<p><a id="ix_Functions.refactor" content="refactor"></a> Let's start with a program that contains some code duplication. Let's see how that duplication can be removed by moving code into functions (i.e. by <i>refactoring</i> the code). The following program reads numbers from the input and prints them first in the order that they have arrived and then in numerical order:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;
<span class="d_keyword">import</span> std.algorithm;

<span class="d_keyword">void</span> main() {
    <span class="d_keyword">int</span>[] numbers;

    <span class="d_keyword">int</span> count;
    write(<span class="d_string">"How many numbers are you going to enter? "</span>);
    readf(<span class="d_string">" %s"</span>, &amp;count);

    <span class="d_comment">// Read the numbers
</span>    <span class="d_keyword">foreach</span> (i; 0 .. count) {
        <span class="d_keyword">int</span> number;
        write(<span class="d_string">"Number "</span>, i, <span class="d_string">"? "</span>);
        readf(<span class="d_string">" %s"</span>, &amp;number);

        numbers ~= number;
    }

    <span class="d_comment">// Print the numbers
</span>    writeln(<span class="d_string">"Before sorting:"</span>);
    <span class="d_keyword">foreach</span> (i, number; numbers) {
        writefln(<span class="d_string">"%3d:%5d"</span>, i, number);
    }

    sort(numbers);

    <span class="d_comment">// Print the numbers
</span>    writeln(<span class="d_string">"After sorting:"</span>);
    <span class="d_keyword">foreach</span> (i, number; numbers) {
        writefln(<span class="d_string">"%3d:%5d"</span>, i, number);
    }
}
</pre>

<p>Some of the duplicated lines of code are obvious in that program. The last two <code class="d_inline">foreach</code> loops that are used for printing the numbers are exactly the same. Defining a function that might appropriately be named as <code class="d_inline">print()</code> would remove that duplication. The function could take a slice as a parameter and print it:
</p>

<pre class="d_code"><span class="d_keyword">void</span> print(<span class="d_keyword">int</span>[] slice) {
    <span class="d_keyword">foreach</span> (i, element; slice) {
        writefln(<span class="d_string">"%3s:%5s"</span>, i, element);
    }
}
</pre>

<p>Notice that the parameter is now referred to using the more general name <code class="d_inline">slice</code> instead of original and more specific name <code class="d_inline">numbers</code>. The reason for that is the fact that the function would not know what the elements of the slice would specifically represent. That can only be known at the place where the function has been called from. The elements may be student IDs, parts of a password, etc. Since that cannot be known in the <code class="d_inline">print()</code> function, general names like <code class="d_inline">slice</code> and <code class="d_inline">element</code> are used in its implementation.
</p>

<p>The new function can be called from the two places where the slice needs to be printed:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;
<span class="d_keyword">import</span> std.algorithm;

<span class="d_keyword">void</span> print(<span class="d_keyword">int</span>[] slice) {
    <span class="d_keyword">foreach</span> (i, element; slice) {
        writefln(<span class="d_string">"%3s:%5s"</span>, i, element);
    }
}

<span class="d_keyword">void</span> main() {
    <span class="d_keyword">int</span>[] numbers;

    <span class="d_keyword">int</span> count;
    write(<span class="d_string">"How many numbers are you going to enter? "</span>);
    readf(<span class="d_string">" %s"</span>, &amp;count);

    <span class="d_comment">// Read the numbers
</span>    <span class="d_keyword">foreach</span> (i; 0 .. count) {
        <span class="d_keyword">int</span> number;
        write(<span class="d_string">"Number "</span>, i, <span class="d_string">"? "</span>);
        readf(<span class="d_string">" %s"</span>, &amp;number);

        numbers ~= number;
    }

    <span class="d_comment">// Print the numbers
</span>    writeln(<span class="d_string">"Before sorting:"</span>);
    <span class="hilite">print(numbers)</span>;

    sort(numbers);

    <span class="d_comment">// Print the numbers
</span>    writeln(<span class="d_string">"After sorting:"</span>);
    <span class="hilite">print(numbers)</span>;
}
</pre>

<p>There is more to do. Notice that there is always a title line printed right before printing the elements of the slice. Although the title is different, the task is the same. If printing the title can be seen as a part of printing the slice, the title too can be passed as a parameter. Here are the new changes:
</p>

<pre class="d_code"><span class="d_keyword">void</span> print(<span class="hilite">string title,</span> <span class="d_keyword">int</span>[] slice) {
    <span class="hilite">writeln(title, <span class="d_string">":"</span>);</span>

    <span class="d_keyword">foreach</span> (i, element; slice) {
        writefln(<span class="d_string">"%3s:%5s"</span>, i, element);
    }
}

<span class="d_comment">// ...
</span>
    <span class="d_comment">// Print the numbers
</span>    print(<span class="hilite"><span class="d_string">"Before sorting"</span></span>, numbers);

<span class="d_comment">// ...
</span>
    <span class="d_comment">// Print the numbers
</span>    print(<span class="hilite"><span class="d_string">"After sorting"</span></span>, numbers);
</pre>

<p>This step has the added benefit of obviating the comments that appear right before the two <code class="d_inline">print()</code> calls. Since the name of the function already clearly communicates what it does, those comments are unnecessary:
</p>

<pre class="d_code">    print(<span class="d_string">"Before sorting"</span>, numbers);
    sort(numbers);
    print(<span class="d_string">"After sorting"</span>, numbers);
</pre>

<p>Although subtle, there is more code duplication in this program: The values of <code class="d_inline">count</code> and <code class="d_inline">number</code> are read in exactly the same way. The only difference is the message that is printed to the user and the name of the variable:
</p>

<pre class="d_code">    <span class="d_keyword">int</span> count;
    write(<span class="d_string">"How many numbers are you going to enter? "</span>);
    readf(<span class="d_string">" %s"</span>, &amp;count);

<span class="d_comment">// ...
</span>
        <span class="d_keyword">int</span> number;
        write(<span class="d_string">"Number "</span>, i, <span class="d_string">"? "</span>);
        readf(<span class="d_string">" %s"</span>, &amp;number);
</pre>

<p>The code would become even better if it took advantage of a new function that might be named appropriately as <code class="d_inline">readInt()</code>. The new function can take the message as a parameter, print that message, read an <code class="d_inline">int</code> from the input, and return that <code class="d_inline">int</code>:
</p>

<pre class="d_code"><span class="d_keyword">int</span> readInt(string message) {
    <span class="d_keyword">int</span> result;
    write(message, <span class="d_string">"? "</span>);
    readf(<span class="d_string">" %s"</span>, &amp;result);
    <span class="d_keyword">return</span> result;
}
</pre>

<p><code class="d_inline">count</code> can now be initialized directly by the return value of a call to this new function:
</p>

<pre class="d_code">    <span class="d_keyword">int</span> count =
        readInt(<span class="d_string">"How many numbers are you going to enter"</span>);
</pre>

<p><code class="d_inline">number</code> cannot be initialized in as straightforward a way because the loop counter <code class="d_inline">i</code> happens to be a part of the message that is displayed when reading <code class="d_inline">number</code>. This can be overcome by taking advantage of <code class="d_inline">format</code>:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.string;
<span class="d_comment">// ...
</span>        <span class="d_keyword">int</span> number = readInt(format(<span class="d_string">"Number %s"</span>, i));
</pre>

<p>Further, since <code class="d_inline">number</code> is used in only one place in the <code class="d_inline">foreach</code> loop, its definition can be eliminated altogether and the return value of <code class="d_inline">readInt()</code> can directly be used in its place:
</p>

<pre class="d_code">    <span class="d_keyword">foreach</span> (i; 0 .. count) {
        numbers ~= <span class="hilite">readInt</span>(format(<span class="d_string">"Number %s"</span>, i));
    }
</pre>

<p>Let's make a final modification to this program by moving the lines that read the numbers to a separate function. This would also eliminate the need for the "Read the numbers" comment because the name of the new function would already carry that information.
</p>

<p>The new <code class="d_inline">readNumbers()</code> function does not need any parameter to complete its task. It reads some numbers and returns them as a slice. The following is the final version of the program:
</p>

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;
<span class="d_keyword">import</span> std.string;
<span class="d_keyword">import</span> std.algorithm;

<span class="d_keyword">void</span> print(string title, <span class="d_keyword">int</span>[] slice) {
    writeln(title, <span class="d_string">":"</span>);

    <span class="d_keyword">foreach</span> (i, element; slice) {
        writefln(<span class="d_string">"%3s:%5s"</span>, i, element);
    }
}

<span class="d_keyword">int</span> readInt(string message) {
    <span class="d_keyword">int</span> result;
    write(message, <span class="d_string">"? "</span>);
    readf(<span class="d_string">" %s"</span>, &amp;result);
    <span class="d_keyword">return</span> result;
}

<span class="d_keyword">int</span>[] <span class="hilite">readNumbers</span>() {
    <span class="d_keyword">int</span>[] result;

    <span class="d_keyword">int</span> count =
        readInt(<span class="d_string">"How many numbers are you going to enter"</span>);

    <span class="d_keyword">foreach</span> (i; 0 .. count) {
        result ~= readInt(format(<span class="d_string">"Number %s"</span>, i));
    }

    <span class="d_keyword">return</span> result;
}

<span class="d_keyword">void</span> main() {
    <span class="d_keyword">int</span>[] numbers = readNumbers();
    print(<span class="d_string">"Before sorting"</span>, numbers);
    sort(numbers);
    print(<span class="d_string">"After sorting"</span>, numbers);
}
</pre>

<p>Compare this version of the program to the first one. The major steps of the program are very clear in the <code class="d_inline">main()</code> function of the new program. In contrast, the <code class="d_inline">main()</code> function of the first program had to be carefully examined to understand the purpose of that program.
</p>

<p>Although the total numbers of nontrivial lines of the two versions of the program ended up being equal in this example, functions make programs shorter in general. This effect is not apparent in this simple program. For example, before the <code class="d_inline">readInt()</code> function has been defined, reading an <code class="d_inline">int</code> from the input involved three lines of code. After the definition of <code class="d_inline">readInt()</code>, the same goal is achieved by a single line of code. Further, the definition of <code class="d_inline">readInt()</code> allowed removing the definition of the variable <code class="d_inline">number</code> altogether.
</p>

<h6>Commented lines of code as functions</h6>

<p>Sometimes the need to write a comment to describe the purpose of a group of lines of code is an indication that those lines could better be moved to a newly defined function. If the name of the function is descriptive enough then there will be no need for the comment either.
</p>

<p>The three commented groups of lines of the first version of the program have been used for defining new functions that achieved the same tasks.
</p>

<p>Another important benefit of removing comment lines is that comments tend to become outdated as the code gets modified over time. When updating code, programmers sometimes forget to update associated comments thus these comments become either useless or, even worse, misleading. For that reason, it is beneficial to try to write programs without the need for comments.
</p>

<h5 class="subsection">Problemler</h5>
    <ol>
<li>Modify the <code class="d_inline">printMenu()</code> function to take the entire set of menu items as a parameter. For example, the menu items can be passed to the function as in the following code:

<pre class="d_code">    string[] items =
        [ <span class="d_string">"Black"</span>, <span class="d_string">"Red"</span>, <span class="d_string">"Green"</span>, <span class="d_string">"Blue"</span>, <span class="d_string">"White"</span> ];
    printMenu(items, 1);
</pre>

<p>Have the program produce the following output:
</p>

<pre class="shell"> 1 Black
 2 Red
 3 Green
 4 Blue
 5 White
</pre>

</li>

<li>The following program uses a two dimensional array as a canvas. Start with that program and improve it by adding more functionality to it:

<pre class="d_code"><span class="d_keyword">import</span> std.stdio;

<span class="d_keyword">enum</span> totalLines = 20;
<span class="d_keyword">enum</span> totalColumns = 60;

<span class="d_comment">/* The 'alias' in the next line makes 'Line' an alias of
 * dchar[totalColumns]. Every 'Line' that is used in the rest
 * of the program will mean dchar[totalColumns] from this
 * point on.
 *
 * Also note that 'Line' is a fixed-length array.  */</span>
<span class="d_keyword">alias</span> Line = <span class="d_keyword">dchar</span>[totalColumns];

<span class="d_comment">/* A dynamic array of Lines is being aliased as 'Canvas'. */</span>
<span class="d_keyword">alias</span> Canvas = Line[];

<span class="d_comment">/* Prints the canvas line by line. */</span>
<span class="d_keyword">void</span> print(Canvas canvas) {
    <span class="d_keyword">foreach</span> (line; canvas) {
        writeln(line);
    }
}

<span class="d_comment">/* Places a dot at the specified location on the canvas. In a
 * sense, "paints" the canvas. */</span>
<span class="d_keyword">void</span> putDot(Canvas canvas, <span class="d_keyword">int</span> line, <span class="d_keyword">int</span> column) {
    canvas[line][column] = '#';
}

<span class="d_comment">/* Draws a vertical line of the specified length from the
 * specified position. */</span>
<span class="d_keyword">void</span> drawVerticalLine(Canvas canvas,
                      <span class="d_keyword">int</span> line,
                      <span class="d_keyword">int</span> column,
                      <span class="d_keyword">int</span> length) {
    <span class="d_keyword">foreach</span> (lineToPaint; line .. line + length) {
        putDot(canvas, lineToPaint, column);
    }
}

<span class="d_keyword">void</span> main() {
    Line emptyLine = '.';

    <span class="d_comment">/* An empty canvas */</span>
    Canvas canvas;

    <span class="d_comment">/* Constructing the canvas by adding empty lines */</span>
    <span class="d_keyword">foreach</span> (i; 0 .. totalLines) {
        canvas ~= emptyLine;
    }

    <span class="d_comment">/* Using the canvas */</span>
    putDot(canvas, 7, 30);
    drawVerticalLine(canvas, 5, 10, 4);

    print(canvas);
}
</pre>

</li>

</ol> <div class="cozum_link_cok"><p><a target="ddili_cozum" href="functions.cozum.html"><i>... çözümler</i></a></p></div>


        <div class="smallprint" id="copyright">Copyright &copy; 1999-2024 by the <a href="../foundation_overview.html">D Language Foundation</a> | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on Mon Jan 29 20:41:02 2024
</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
